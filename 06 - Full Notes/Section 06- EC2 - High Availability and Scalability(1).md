---
â­•ì²« í•™ìŠµë‚ : 2024-08-30
â­•ê³¼ëª©: AWS
â­•êµìž¬: Ultimate AWS Certified SysOps Administrator Associate 2024
â­•í•™ìŠµì •ë„: ðŸ¤”ì¤‘
â¤1ì¼ë³µìŠµì—¬ë¶€: true
ðŸ§¡4ì¼ë³µìŠµì—¬ë¶€: true
ðŸ’›7ì¼ë³µìŠµì—¬ë¶€: true
ðŸ’š14ì¼ë³µìŠµì—¬ë¶€: true
ðŸ§ ìž¥ê¸°ê¸°ì–µ: true
ë³µìŠµ: ìž¥ê¸°ê¸°ì–µ
ðŸ›‘ì²«ë‚ : "âœì²«ë‚  : 2024/08/30"
ðŸ›‘ì˜¤ëŠ˜: "â°ì˜¤ëŠ˜ : 2024/10/27"
ðŸ›‘ì²«í•™ìŠµí›„ ëª‡ì¼ì§¸?: ì²« í•™ìŠµ í›„ â¤58ì¼ì§¸â¤
ðŸ›‘4ì¼í›„: "ðŸ¥‰4ì¼ë’¤ : 2024/09/03"
ðŸ›‘7ì¼í›„: "ðŸ¥ˆ7ì¼ë’¤ : 2024/09/06"
ðŸ›‘14ì¼í›„: "ðŸ¥‡14ì¼ë’¤ : 2024/09/13"
4ì¼í›„: "@2024ë…„ 9ì›” 3ì¼"
4ì¼í›„(text): 2024/09/03
7ì¼í›„: "@2024ë…„ 9ì›” 6ì¼"
7ì¼í›„(text): 2024/09/06
14ì¼í›„: "@2024ë…„ 9ì›” 13ì¼"
14ì¼í›„(text): 2024/09/13
ì˜¤ëŠ˜1: "@2024ë…„ 10ì›” 27ì¼ ì˜¤í›„ 2:01"
ì˜¤ëŠ˜2: 2024/10/27
ì²«í•™ìŠµë‚ text: 2024/08/30
ì˜¤ëŠ˜ê³¼ ì²«í•™ìŠµë‚  ì‚¬ì´: "58"
ì‚¬ì´: "58"
"1ì¼ì°¨ë³µìŠµì—¬ë¶€1,0": "1"
"4ì¼ì°¨ë³µìŠµì—¬ë¶€1,0": "1"
"7ì¼ì°¨ë³µìŠµì—¬ë¶€1,0": "1"
"ìž¥ê¸°ê¸°ì–µì €ìž¥ì—¬ë¶€1,0": "1"
í•™ìŠµë¥ : "0.8"
ì§„í–‰ë°”: ðŸŸ©ðŸŸ©ðŸŸ©ðŸŸ©ðŸŸ©ðŸŸ©ðŸŸ©ðŸŸ©â¬œâ¬œ 80%
---
[[AWS]] [[Ultimate AWS Certified SysOps Administrator Associate 2024]] [[High Availability]]

### ë‹¨ì„œ ì§ˆë¬¸

- High Availabilityëž€?
    
    ë†’ì€ ê°€ìš©ì„±ìœ¼ë¡œ íŠ¹ì • ë¦¬ì „ì´ë‚˜ AZì— ìž¥ì• ê°€ ë°œìƒí•˜ë”ë¼ë„ ì„œë¹„ìŠ¤ì˜ ë¬¸ì œê°€ ì—†ì–´ì•¼ í•œë‹¤. ì´ì¤‘í™”
    
- High Availabilityë¥¼ ìœ„í•œ ì„¤ì • ë°©ë²•ì€?
    
    Multi AZì—ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰í•œë‹¤. ELBëŠ” Cross-Zone ì„¤ì •ì„ í†µí•´ ê· ë“±í•˜ê²Œ íŠ¸ëž˜í”½ì„ ë¶„ë°°í•œë‹¤.
    
- High Scalabilityëž€?
    
    ë†’ì€ í™•ìž¥ì„±ìœ¼ë¡œ íŠ¸ëž˜í”½ì´ ëª°ë¦¬ê±°ë‚˜ ì¤„ì–´ë“¤ì—ˆì„ ë•Œ ìœ ë™ì ìœ¼ë¡œ ìžì›ì˜ í™•ìž¥ í˜¹ì€ ì¶•ì†Œê°€ ì¼ì–´ë‚œë‹¤.
    
- High Scalabilityë¥¼ ìœ„í•œ ì„¤ì • ë°©ë²•ì€?
    
    ASG ê·¸ë£¹ì„ í†µí•´ì„œ EC2 ìŠ¤ì¼€ì¼ë§ì„ ì§€ì›í•œë‹¤.
    
- ALBì˜ ìŠ¤ì½”í”„ëŠ”?
    
    AZë³„ë¡œ ì¡´ìž¬í•œë‹¤. Cross Zone ì •ì±…ì„ í†µí•´ ì„œë¡œ ë‹¤ë¥¸ AZì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ íŒ¨í‚· í¬ì›Œë”©ì´ ê°€ëŠ¥í•˜ë‹¤.
    

### í•µì‹¬ í•„ê¸°

- ì „ì²´ ë‚´ìš© ì ‘ê¸°
    - [SAA/DVA] What is High Availability and Scalability?
        - Scalability and High Availability Section
            - ScalabilityëŠ” ì•±ì´ë‚˜ ì‹œìŠ¤í…œì´ ë” ë§Žì€ ê³¼ë¶€í•˜ì—ë„ ì ì‘ì„ í†µí•´ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•œ ê²ƒ
            - í™•ìž¥ì„±ì€ ê°€ìš©ì„±ì´ëž‘ ì—°ê²°ë˜ì§€ë§Œ ë‹¤ë¥¸ ê°œë…ì´ë‹¤.
        - Vertical Scalability
            - ì‚¬ì´ì¦ˆë¥¼ í‚¤ìš°ëŠ” ê²ƒ
            - t2.medium â†’ t2.large
            - RDS, ElasticCache ì„œë¹„ìŠ¤ë“¤ì€ ìˆ˜ì§ ìŠ¤ì¼€ì¼ë§ì´ ê°€ëŠ¥í•˜ë‹¤.
        - Horizontal Scalability
            - ì¸ìŠ¤í„´ìŠ¤ì˜ ê°œìˆ˜ë¥¼ ëŠ˜ë¦°ë‹¤.
        - High Availiability
            - ìˆ˜í‰ ìŠ¤ì¼€ì¼ë§ì´ëž‘ ê°™ì´ ì„¤ëª…ëœë‹¤.
            - ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ë‚˜ ì„œë¹„ìŠ¤ê°€ ìµœì†Œ 2ê°œ ë°ì´í„° ì„¼í„°ì—ì„œ ëŒì•„ê°€ì•¼ í•œë‹¤.
            - ë°ì´í„° ì„¼í„° ì†ì‹¤ì—ë„ ì‚´ì•„ë‚¨ëŠ” ê²Œ High Availabilityì˜ ëª©í‘œë‹¤.
            - The high availability can be passive (for  
                RDS Multi AZ for example)  
                
            - The high availability can be active (for  
                horizontal scaling)  
                
        - High Availability & Scalability for EC2
            - ìˆ˜ì§ ìŠ¤ì¼€ì¼ë§: ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì´ì¦ˆ í‚¤ìš°ê¸°
            - ìˆ˜í‰ ìŠ¤ì¼€ì¼ë§: ì¸ìŠ¤í„´ìŠ¤ ê°œìˆ˜ ëŠ˜ë¦¬ê¸°
                - Auto Scaling Group
                - ë¡œë“œë°¸ëŸ°ì„œ
            - High Availability: ì—¬ëŸ¬ AZì—ì„œ ë˜‘ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì¸ìŠ¤í„´ìŠ¤ ëŒë¦¬ê¸°
                - Auto Scaling Group multi-AZ
                - ë¡œë“œë°¸ëŸ°ì„œ ë©€í‹°-AZ
    - [SAA/DVA] Elastic Load Balancing (ELB) Overview
        - What is Load Balancing
            
            ![[image 42.png]]
            
            - ë¡œë“œ ë°¸ëŸ°ì‹±ì€ ì„œë²„ë‹¤. í•´ë‹¹ ì„œë²„ë¡œ ë“¤ì–´ì˜¤ëŠ” íŠ¸ëž˜í”½ë“¤ì„ ì—¬ëŸ¬ ì„œë²„ë¡œ ë¶„ë°°í•œë‹¤.
        - Why use a load balancer
            - DNSë¥¼ í•˜ë‚˜ ì‚¬ìš©í•´ì„œ ì—¬ëŸ¬ ì„œë²„ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìžˆë‹¤.
            - ì„œë²„ì— ëŒ€í•œ ì§ì ‘ì ì¸ ì ‘ê·¼ì„ ë§‰ì„ ìˆ˜ ìžˆë‹¤.
            - ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ì„œë²„ì˜ ìƒíƒœê°€ ì¢‹ì§€ ì•Šë”ë¼ë„ ë¡œë“œë°¸ëŸ°ì„œì—ì„œ í•´ë‹¹ ì„œë²„ë¡œ ìš”ì²­ì„ ë³´ë‚´ì§€ ì•Šì•„ì„œ ì™¸ì ìœ¼ë¡œ ë¬¸ì œê°€ ì—†ì–´ë³´ì¸ë‹¤.(Seamlessly handle failures of downstream instances)
            - ì£¼ê¸°ì ìœ¼ë¡œ ì„œë²„ë“¤ì˜ ìƒíƒœë¥¼ ì ê²€í•œë‹¤.
            - SSL ì œê±°ë¥¼ ì§€ì›í•œë‹¤.(Provide SSL termination Https for your websites)
            - Enforce stickiness with cookies(ALB, CLBëŠ” cookieë¥¼ ì‚¬ìš©í•´ì„œ ë¡œë“œë°¸ëŸ°ì„œë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ë™ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë³´ë‚´ì¤€ë‹¤. NLBëŠ” cookieë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì´ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.)
            - ë†’ì€ ê°€ìš©ì„±ì„ ì œê³µ(High Availability across zones)
            - Separate public traffic from private traffic
        - Why use an Elastic Load Balancer?
            
            - Elastic Load BalancerëŠ” AWSì—ì„œ ì œê³µí•˜ëŠ” ë¡œë“œë°¸ëŸ°ì„œë¥¼ ì´ì¹­í•œë‹¤.
            - AWS ë™ìž‘ì„ ë³´ìž¥í•˜ë©° ì—…ê·¸ë ˆì´ë“œë‚˜ ìœ ì§€ë³´ìˆ˜ ë“±ì„ ì¼€ì–´í•œë‹¤.
            - AWS provides only a few configuration knobs
            
              
            
            - ë¡œë“œë°¸ëŸ°ì„œë¥¼ ì§ì ‘ êµ¬ì¶•í•˜ëŠ” ê²ƒë³´ë‹¨ ë¹„ì‹¸ì§€ë§Œ ì§ì ‘ êµ¬ì¶•í•˜ëŠ” ê±´ ê¹Œë‹¤ë¡­ë‹¤.
            - It is integrated with many AWS offerings / services
                - EC2, EC2 Auto Scaling Groups, Amazon ECS
                - AWS Certificate Manager (ACM), CloudWatch
                - Route 53, AWS WAF, AWS Global Accelerator
        - Health Checks
            
            - ë¡œë“œë°¸ëŸ°ì„œì—ì„  ì£¼ê¸°ì ìœ¼ë¡œ ì„œë²„ë“¤ì˜ ìƒíƒœë¥¼ ì²´í¬í•œë‹¤.
            - í—¬ìŠ¤ ì²´í¬ëŠ” í¬íŠ¸ì™€ ë¼ìš°í„°ì—ì„œ ì´ë¤„ì§„ë‹¤.
            - ë§Œì•½, í—¬ìŠ¤ ì²´í¬ê°€ ë¦¬í„´í•˜ëŠ” ìƒíƒœ ì½”ë“œê°€ 200ì´ ì•„ë‹ˆë©´ í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ëŠ” ê±´ê°•í•˜ì§€ ì•Šë‹¤ëŠ” ë§ì´ë‹¤.
            
            ![[image 1 15.png]]
            
        - Types of load balancer on AWS
            
            - AWSëŠ” 4ê°€ì§€ ë¡œë“œë°¸ëŸ°ì„œê°€ ì¡´ìž¬í•œë‹¤.
            - CLB
            - ALB
            - NLB
                - 4ê³„ì¸µì„ ì´ìš©í•˜ëŠ” ë¡œë“œë°¸ëŸ°ì„œ
            - GLB
                - 3ê³„ì¸µì„ ì´ìš©í•˜ëŠ” ë¡œë“œë°¸ëŸ°ì„œ
            
              
            
            - ë°‘ìœ¼ë¡œ ê°ˆìˆ˜ë¡ ìƒˆë¡œìš´ ë¡œë“œë°¸ëŸ°ì„œë¡œ ê°€ê¸‰ì  ìƒˆë¡œìš´ ë¡œë“œë°¸ëŸ°ì„œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²Œ ì¢‹ë‹¤.
            - ëª‡ëª‡ ë¡œë“œë°¸ëŸ°ì„œëŠ” ë‚´ë¶€(internal, private)ë‚˜ ì™¸ë¶€(external public) ë¡œë“œë°¸ëŸ°ì„œë¡œ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.
            
            ![[image 2 13.png]]
            
    - Note: About the Classic Load Balancer(CLB)
        - Classic Load Balancers (v1)
            - 4ê³„ì¸µ 7ê³„ì¸µ ëª¨ë‘ ì§€ì›
            - í—¬ìŠ¤ ì²´í¬ëŠ” TCP, HTTP í”„ë¡œí† ì½œì„ ì‚¬ìš©
            - ê³ ì •ëœ í˜¸ìŠ¤íŠ¸ ë„¤ìž„ ì‚¬ìš©
                - XXX.region.elb.amazonaws.com
    - [SAA/DVA] Application Load Balancer (ALB)
        - Application Load Balancer (v2)
            
            - 7ê³„ì¸µ ë¡œë“œë°¸ëŸ°ì„œë‹¤. (HTTP)
            - target groups(Http Application)ì— í¬ì›Œë”©ì„ í•œë‹¤.
            - ë™ì¼ ì¸ìŠ¤í„´ìŠ¤ì˜ ì—¬ëŸ¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ í¬ì›Œë”©ë„ ê°€ëŠ¥í•˜ë‹¤.(ì»¨í…Œì´ë„ˆ)
            - ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼ ì§€ì›í•œë‹¤.(from HTTP to HTTPS for example)
            - ë¼ìš°íŒ… í…Œì´ë¸”ì„ í†µí•´ ì„œë¡œ ë‹¤ë¥¸ target groupsì— í¬ì›Œë”© ê°€ëŠ¥í•˜ë‹¤.
                - URLì„ í†µí•´ì„œ í¬ì›Œë”© (example.com**/users** example.com/**posts**)
                - í˜¸ìŠ¤íŠ¸ë„¤ìž„ì„ í†µí•´ì„œ í¬ì›Œë”© (**one.example.com** & **other.example.com**)
                - ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì´ë‚˜ í—¤ë”ë¥¼ í†µí•´ì„œ í¬ì›Œë”©(example.com/users?id=123&order=false)
            - ALBëŠ” micro serviceì™€ ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— íš¨ìœ¨ì ì´ë‹¤.
                - ì˜ˆ: Docker & Amazon ECS
            - ë¦¬ë‹¤ì´ë ‰íŒ…ì„ í†µí•´ì„œ ECSì— ë™ì ìœ¼ë¡œ í¬íŠ¸ ë§¤í•‘ì´ ê°€ëŠ¥í•˜ë‹¤.
            - CLBëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ë³„ë¡œ í•˜ë‚˜ì”© í•„ìš”í•˜ë‹¤.
            
            ![[image 3 12.png]]
            
        - Target Groups
            
            - EC2 instances (Auto Scaling Groupì„ í†µí•´ ê´€ë¦¬ ê°€ëŠ¥í•˜ë‹¤) - HTTP
            - ECS tasks (managed by ECS itself) - HTTP
            - Lambda functions - HTTP request is translated into a JSON event
            - IP Addresses - private IPì—¬ì•¼ë§Œ í•œë‹¤.
            
              
            
            - ALBëŠ” ì—¬ëŸ¬ Target groupì— ë¼ìš°íŒ… ê°€ëŠ¥í•˜ë‹¤.
            - Health CheckëŠ” target group ìˆ˜ì¤€ì—ì„œ ì§„í–‰í•œë‹¤.
        - Query Strings/Parametrs Routing
            
            ![[image 4 12.png]]
            
        - Good to Know
            - ê³ ì •ëœ í˜¸ìŠ¤íŠ¸ë„¤ìž„ì„ ê°€ì§„ë‹¤. (XXX.region.elb
            - í´ë¼ì´ì–¸íŠ¸ì˜ IPë¥¼ ì§ì ‘ì ìœ¼ë¡œ ë³´ì§€ ì•ŠëŠ”ë‹¤.
                
                - í´ë¼ì´ì–¸íŠ¸ì˜ ì§„ì§œ IPëŠ” í—¤ë”ì˜ X-Forwarded-Forë‹¤.
                - í—¤ë”ì—ì„œ Port (X-Forwarded-Port)ì™€ proto (X-Forwarded -Proto)ë¥¼ ì–»ì„ ìˆ˜ ìžˆë‹¤.
                
                ![[image 5 10.png]]
                
    - [SAA/DVA] Network Load Balancer (NLB)
        - Network Load Balancer - Target Groups
            
            - íƒ€ê²Ÿ ê·¸ë£¹ì˜ ëŒ€ìƒ
                - EC2 Instances
                - IP Addresses
                - ALB
            - í—¬ìŠ¤ ì²´í¬ëŠ” HTTP, HTTPS, TCP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•œë‹¤.
            
            ![[image 6 10.png]]
            
            - Network Load Balancer with ALB: NLBëŠ” ê³ ì • IPë¥¼ ì œê³µí•˜ê³  ALBë¥¼ í†µí•´ì„œ HTTP íŠ¸ëž˜í”½ì„ í•¸ë“¤ë§í•œë‹¤.
    - [SAA/DVA] Gateway Load Balancer( GWLB)
        - Gateway Load Balancer
            
            - ì„œë“œíŒŒí‹° ë„¤íŠ¸ì›ŒíŠ¸ ê°€ìƒ ì œí’ˆì„ ë°°í¬, ìŠ¤ì¼€ì¼, ê´€ë¦¬í•©ë‹ˆë‹¤.(Deploy, scale, and manage a fleet of 3rd party network virtual appliances in AWS)
                - Firewalls
                - Intrusion Detection
                - Prevention Systems
                - Deep Packet Inspection
            - 3ê³„ì¸µì—ì„œ ë™ìž‘í•©ë‹ˆë‹¤. - IP Packetì„ ì¡°ì‚¬
            - ë‹¤ìŒ ê¸°ëŠ¥ë“¤ê³¼ ê²°í•©ë©ë‹ˆë‹¤.
                - Transparent Network Gateway - single entry/exit for all traffic
                - Load Balancer - íŠ¸ëž˜í”½ì„ virtual appliancesì— ë¶„ë°°í•©ë‹ˆë‹¤.
            
            ![[image 7 8.png]]
            
        - Gateway Load Balancer - Target Groups
            
            - EC2 ì¸ìŠ¤í„´ìŠ¤
            - IP ì£¼ì†Œ - must be private IPs
            
            ![[image 8 8.png]]
            
    - [SAA/DVA] Elastic Load Balancer - Sticky Sessions
        - Sticky Sessions (Session Affinity)
            - stickinessëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ë™ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ë¡œ ìš”ì²­ì„ ë³´ë‚´ë„ë¡ í•©ë‹ˆë‹¤.(ì„¸ì…˜ ìœ ì§€)
            - CLB, ALB, NLB ëª¨ë‘ ì§€ì›í•©ë‹ˆë‹¤.
            - CLBì™€ ALBëŠ” í—¤ë”ì— ìžˆëŠ” ì¿ í‚¤ì˜ ê°’ì„ í†µí•´ì„œ stickinessë¥¼ ì§€ì›í•˜ê³  í•´ë‹¹ ì¿ í‚¤ëŠ” ë§Œë£Œ ê¸°ê°„ì„ ê°€ì§‘ë‹ˆë‹¤.
            - stickinessë¥¼ ì‚¬ìš©í•˜ë©´ ë¡œë“œë°¸ëŸ°ì„œë¥¼ í†µí•´ì„œ ë¶„ë°°ë˜ëŠ” ìž‘ì—…ë“¤ì˜ ê· í˜•ì´ ë¬´ë„ˆì§ˆ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. (ë¡œë“œë°¸ëŸ°ì„œëŠ” ì¸ìŠ¤í„´ìŠ¤ì˜ ê· ì¼í•˜ê²Œ ìž‘ì—…ì„ ë¶„ë°°í•´ì•¼ í•˜ëŠ”ë° stickinessë¥¼ í™œì„±í™”í•˜ë©´ ë™ì¼ í´ë¼ì´ì–¸íŠ¸ëŠ” ê³„ì† ë™ì¼ ì¸ìŠ¤í„´ìŠ¤ì— ìš”ì²­ì„ ë³´ë‚¸ë‹¤)
        - Sticky Sessions - Cookie Names
            - Application-based Cookies
                - Custom cookie
                    - ëŒ€ìƒì— ì˜í•´ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.(Generated by the target)
                    - ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ìš”êµ¬í•˜ëŠ” ì»¤ìŠ¤í…€ ì†ì„±ì„ ë‹´ì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
                    - íƒ€ê²Ÿ ê·¸ë£¹ë§ˆë‹¤ ì¿ í‚¤ì´ë¦„ì„ ëª…ì‹œí•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.
                    - AWSALB, AWSALBAPP, AWSALBTG(Target Group í™œì„±í™” ê´€ë ¨)ëŠ” ELBì—ì„œ ì‚¬ìš©í•˜ëŠ” ì¿ í‚¤ì´ë¯€ë¡œ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.
                - Application cookie
                    - ë¡œë“œë°¸ëŸ°ì„œì— ì˜í•´ì„œ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤. (Generated by the load balancer)
                    - ì¿ í‚¤ëª…ì€ AWSALBAPPìž…ë‹ˆë‹¤.
            - Duration-based Cookies
                - ì¿ í‚¤ëŠ” ë¡œë“œë°¸ëŸ°ì„œì— ì˜í•´ì„œ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.
                - ì¿ í‚¤ëª…ì€ ALBë¥¼ ì‚¬ìš©í•˜ë©´ AWSALB, CLBë¥¼ ì‚¬ìš©í•˜ë©´ AWSELBìž…ë‹ˆë‹¤.
    - [SAA/DVA] Elastic Load Balancer - Cross Zone Load Balancing
        
        - ë¡œë“œë°¸ëŸ°ì„œëŠ” AZë§ˆë‹¤ 1ê°œì”© ì¡´ìž¬í•©ë‹ˆë‹¤.
        - ë”°ë¼ì„œ, AZ 2ê°œì— ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ì´ ìš”ì²­ì€ 50 ëŒ€ 50ìœ¼ë¡œ ë‚˜ëˆ ì§ˆ ê²ƒì´ë©° ê° AZì— ì‹¤ì œë¡œ ê°€ìš© ê°€ëŠ¥í•œ ì¸ìŠ¤í„´ìŠ¤ê°€ ëª‡ ê°œ ìžˆë”ë¼ë„ ë¡œë“œë°¸ëŸ°ì„œëŠ” ë˜‘ê°™ì´ 50 ëŒ€ 50ìœ¼ë¡œ ë‚˜ëˆ•ë‹ˆë‹¤.
        - ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ì¡´ìž¬í•˜ëŠ” ì„¤ì •ì´ Cross-Zone Load Balancingìž…ë‹ˆë‹¤.
        - ìžì‹ ì˜ ì§€ì—­ì— ìžˆëŠ” ì¸ìŠ¤í„´ìŠ¤ ë¿ë§Œì´ ì•„ë‹ˆë¼ ë‹¤ë¥¸ AZì— ì†í•œ ì¸ìŠ¤í„´ìŠ¤ì—ë„ ë¡œë“œë°¸ëŸ°ì‹±ì„ í•©ë‹ˆë‹¤.
        - ë”°ë¼ì„œ, ìš”ì²­ì€ ì¸ìŠ¤í„´ìŠ¤ ë³„ë¡œ ê³¨ê³ ë£¨ ë¶„ë°°ë©ë‹ˆë‹¤.
        
        ![[image 9 8.png]]
        
          
        
        **ELBë³„ Cross-Zone íŠ¹ì„±**
        
        - ALB
            - ê¸°ë³¸ì ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìžˆìŒ(Target Group ìˆ˜ì¤€ì—ì„œ ë¹„í™œì„±í™” ê°€ëŠ¥)
            - AZ ê°„ ë°ì´í„° ì „ì†¡ ìš”ê¸ˆì€ ë¬´ë£Œìž…ë‹ˆë‹¤. (No Charges for inter AZ data)
        - NLB & GLB
            - ê¸°ë³¸ì ìœ¼ë¡œ ë¹„í™œì„±í™”
            - AZ ê°„ ë°ì´í„° ì „ì†¡ì€ ìš”ê¸ˆì´ ë¶€ê³¼ë©ë‹ˆë‹¤.
        - CLB
            - ê¸°ë³¸ì ìœ¼ë¡œ ë¹„í™œì„±í™”
            - AZ ê°„ ë°ì´í„° ì „ì†¡ ìš”ê¸ˆì€ ë¬´ë£Œìž…ë‹ˆë‹¤. (No Charges for inter AZ data)
    - [SAA/DVA] Elastic Load Balancer - SSL Certificates
        - SSL/TLS - Basics
            - SSL (Secure Socket Layer) CertificateëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ë¡œë“œë°¸ëŸ°ì„œ í†µì‹  ê°„ì— íŒ¨í‚·ì„ ì•”í˜¸í™”í•  ìˆ˜ ìžˆê²Œ í•´ì¤ë‹ˆë‹¤.(in-flight encryption)
            - SSLì€ Secure Socket Layerë¡œ ì—°ê²°ì„ ì•”í˜¸í™”í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
            - TLSëŠ” ì „ì†¡ ê³„ì¸µì˜ TCPì™€ SSLì„ ê²°í•©ëœ ê¸°ìˆ ì„ ë§í•©ë‹ˆë‹¤.
            - Public SSL certificates are issued by CA (Certificate Authorities)
            - SSL has an expiration date (you set)
        - Load Balancer - SSL Certificates
            
            ![[image 10 7.png]]
            
            - ë¡œë“œë°¸ëŸ°ì„œëŠ” X.509 ì¸ì¦ì„œë¥¼ ì‚¬ìš© (SSL/TLS server certificate)
            - ACM(AWS Certificate Manager)ì„ í†µí•´ì„œ ì¸ì¦ì„œ ê´€ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
            - ìžê¸° ì†Œìœ ì˜ ì¸ì¦ì„œë¥¼ ë§Œë“¤ê³  ì—…ë¡œë“œí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
            - HTTPS listener:
                - You must specify a default certificate
                - You can add an optional list of certs to support multiple domains
                - Clients can use SNI (Server Name Indication) to specify the hostname they reach
                - Ability to specify a security policy to support older versions of SSL / TLS (legacy clients)
        - SSL - Server Name Indication
            
            - SNIëŠ” ì—¬ëŸ¬ ë„ë©”ì¸ì˜ ì¸ì¦ì„œë¥¼ ê°€ì§€ê³  ìžˆëŠ” ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤.
            - SNIëŠ” ìƒˆë¡œ ë‚˜ì˜¨ í”„ë¡œí† ì½œë¡œ í´ë¼ì´ì–¸íŠ¸ê°€ í˜¸ìŠ¤íŠ¸ ë„¤ìž„ì„ ëª…ì‹œí•˜ë©´ ì„œë²„ì—ì„  í•´ë‹¹í•˜ëŠ” í˜¸ìŠ¤íŠ¸ ë„¤ìž„ê³¼ ì¼ì¹˜í•˜ëŠ” ì¸ì¦ì„œë¥¼ ë¦¬í„´í•˜ê±°ë‚˜ ë§Œì•½, í˜¸ìŠ¤íŠ¸ ë„¤ìž„ì´ ì—†ë‹¤ë©´ defaultë¡œ ì„¤ì •ëœ ì¸ì¦ì„œë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.
            
              
            
            **ì¶”ê°€ ë…¸íŠ¸**
            
            - ALB, NLB, CloudFrontë§Œ ì§€ì›í•œë‹¤.
            - Does not work for CLB(older gen)
        - Elastic Load Balancers - SSL Certificates
            - CLB
                - ì¸ì¦ì„œ 1ê°œë§Œ ì‚¬ìš© ê°€ëŠ¥
                - í˜¸ìŠ¤íŠ¸ë„¤ìž„ í•˜ë‚˜ë§ˆë‹¤ í•˜ë‚˜ì˜ CLBê°€ í•„ìš”í•˜ë‹¤.
            - ALB
                - ì¸ì¦ì„œ ì—¬ëŸ¬ ê°œ ì‚¬ìš© ê°€ëŠ¥
                - SNIë¥¼ í†µí•´ì„œ í•´ë‹¹í•˜ëŠ” ì¸ì¦ì„œë¥¼ ë‚´ë ¤ì¤Œ.
            - NLB
                - ì¸ì¦ì„œ ì—¬ëŸ¬ ê°œ ì‚¬ìš© ê°€ëŠ¥
                - SNIë¥¼ í†µí•´ì„œ í•´ë‹¹í•˜ëŠ” ì¸ì¦ì„œë¥¼ ë‚´ë ¤ì¤Œ.
    - [SAA/DVA] Elastic Load Balancer - Connection Draining
        - Connection Draning
            - Feature naming
                - Connection Draining - for CLB
                - Deregistration Delay - for ALB & NLB
            - ì¸ìŠ¤í„´ìŠ¤ê°€ ë¹„ì •ìƒ ìƒíƒœ(ì¤‘ë‹¨, ë“±ë¡í•´ì œ, unhealthy)ì™€ ê°™ì€ ì‹œê°„ì¼ ë•Œ, ìœ ì˜ˆ ê¸°ê°„ì„ ì£¼ê³  í•´ë‹¹ ì‹œê°„ ë‚´ì— íšŒë³µë˜ì§€ ì•Šìœ¼ë©´ í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¡œë“œë°¸ëŸ°ì„œì—ì„œ ì œê±°í•©ë‹ˆë‹¤.
            - ìœ ì˜ˆ ê¸°ê°„ë™ì•ˆ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ë“¤ì€ Draning ìƒíƒœ(de-registering)ê°€ ì•„ë‹Œ ê±´ê°•í•œ ì¸ìŠ¤í„´ìŠ¤ë¡œ ìš”ì²­í•©ë‹ˆë‹¤.
            - ìœ ì˜ˆ ê¸°ê°„ì€ 1~3600ì´ˆ (ê¸°ë³¸ê°’: 300ì´ˆ)
            - ë¹„í™œì„±í™” ê°€ëŠ¥ (0ì´ˆë¡œ ì„¤ì •í•˜ë©´ ë¹„í™œì„±í™”)
            - ìš”ì²­ ì‹œê°„ì´ ì§§ìœ¼ë©´ ë‚®ì€ ê°’ìœ¼ë¡œ ì„¤ì •í•˜ì„¸ìš”
    - Elastic Load Balancer - Health Checks
        
        - íƒ€ê²Ÿ í—¬ìŠ¤ ìƒíƒœ
            - Initial: íƒ€ê²Ÿ ë“±ë¡
            - Healthy
            - Unhealthy
            - Unused: íƒ€ê²Ÿì´ ë“±ë¡ë˜ì§€ ì•ŠìŒ
            - Draining: de-registering the target
            - Unavailable: health checks disabled
        - ëª¨ë“  íƒ€ê²Ÿ ê·¸ë£¹ì´ unhealthyë©´ ê·¸ëƒ¥ ìš”ì²­í•¨(If a target group contains only unhealthy targets, ELB routes requests across its unhealthy targets)
        
        ![[image 11 7.png]]
        
    - Elastic Load Balancer - Monitoring, Troubleshooting, Logging and Tracing
        - Load Balancer Error Codes
            - Successful request : Code 200.  
                  
                
            - Unsuccessful at client side : 4XX code.  
                â€¢ Error 400 : Bad Request  
                â€¢ Error 401 : Unauthorized  
                â€¢ Error 403 : Forbidden  
                â€¢ Error 460 : Client closed connection.  
                â€¢ Error 463 : X-Forwarded For header with >30 IP (Similar to malformed request).  
                  
                
            - Unsuccessful at server side : 5xx code.  
                â€¢ An error 500 / Internal server error would mean some error on the ELB itself.  
                â€¢ Error 502 : Bad Gateway  
                â€¢ An error 503 / Service Unavailable  
                â€¢ Error 504 / Gateway timeout : probably an issue within the server.  
                â€¢ Error 561 : Unauthorized  
                
        - Load Balancers Monitoring
            
            ![[image 12 7.png]]
            
        - Load Balancer troubleshooting using metrics
            
            ![[image 13 7.png]]
            
        - Load Balancers Access Logs
            - ë¡œê·¸ëŠ” S3ì— ì €ìž¥í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì €ìž¥ë˜ëŠ” ì •ë³´ë“¤ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
                - Time
                - Client IP address
                - Latency
                - Request paths
                - Server Response
                - Trace ID
            - S3 Storage ìš©ëŸ‰ë§Œí¼ë§Œ ìš”ê¸ˆ ë¶€ê³¼
            - ë¡œê·¸ëŠ” ì•”í˜¸í™”ë˜ì–´ ì €ìž¥ëœë‹¤.
        - Application Load Balancer Request Tracing
            - Request tracing - Each HTTP request has an added custom header â€˜X-Amzn-Trace-Idâ€™
            - Example: X-Amzn-Trace-Id: Root=1-67891233-abcdef012345678912345678
            - ALB is not (yet) intergrated with X-Ray
    - Target Group Attributs
        - Target Groups Settings
            - deregisteration_delay.timeout_seconds: time the load balancer waits before  
                deregistering a target  
                
            - slow_start.duration_seconds: (see next slide)
            - load_balancing.algorithm.type: how the load balancer selects targets when  
                routing requests (Round Robin, Least Outstanding Requests)  
                
            - stickiness.enabled
            - stickiness.type: application-based or duration-based cookie
            - stickiness.app_cookie.cookie_name: name of the application cookie
            - stickiness.app_cookie.duration_seconds: application-based cookie expiration  
                period  
                
            - stickiness.lb_cookie.duration_seconds: duration-based cookie expiration  
                perio  
                
        - Slow Start Mode
            - ë¡œë“œë°¸ëŸ°ì„œì— ì¸ìŠ¤í„´ìŠ¤ê°€ ë“±ë¡ë˜ìžë§ˆìž í¬ì›Œë”©í•˜ëŠ” ê²Œ ì•„ë‹Œ ì¼ì • ì‹œê°„ ê¸°ë‹¤ë ¸ë‹¤ê°€ í¬ì›Œë”©í•œë‹¤.
            - Slow Start Modeê°€ ì¢…ë£Œë˜ëŠ” ìˆœê°„
                - The duration period elapses
                - The target becomes unhealthy
            - ì‹œê°„ì„ 0ìœ¼ë¡œ ì„¤ì •í•´ì„œ disable ê°€ëŠ¥í•˜ë‹¤.
        - Request Routing Algorithms - Least Outstanding Requests
            - ë‹¤ìŒ ìš”ì²­ì„ ë°›ì„ ì¸ìŠ¤í„´ìŠ¤ëŠ” ê°€ìž¥ ì ì€ pending/unfinished requestsë¥¼ ê°€ì§„ ì¸ìŠ¤í„´ìŠ¤ë‹¤.
            - ALB, CLBëž‘ ê°™ì´ ë™ìž‘í•œë‹¤.
        - Request Routing Algorithms - Round Robin
            - ìˆœì„œëŒ€ë¡œ ìš”ì²­ í• ë‹¹
        - Request Routing Algorithms - Flow Hash
            
            - íŒ¨í‚·ì˜ ì¶œë°œ IP ì£¼ì†Œ, í¬íŠ¸, TCP SEQ ë²ˆí˜¸ë¥¼ í†µí•´ì„œ í•´ì‹±í•œë‹¤.
            - ì—°ê²°ëœ ë™ì•ˆ ê³„ì† ë™ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ì— ë¼ìš°íŒ…ëœë‹¤.
            - NLBì™€ ê°™ì´ ì‚¬ìš©ëœë‹¤.
            
            ![[image 14 6.png]]
            
    - ALB Rules - Deep Dive
        - ALB - Listener Rules
            
            ![[image 15 6.png]]
            
            - Processed in order (with Default Rule)  
                â€¢ Supported Actions (forward, redirect,  
                fixed-response)  
                â€¢ Rule Conditions:  
                â€¢ host-header  
                â€¢ http-request-method  
                â€¢ path-pattern  
                â€¢ source-ip  
                â€¢ http-header  
                â€¢ query-string  
                
        - Target Group weighting
            
            - Rule í•˜ë‚˜ì— ì†í•œ Target Groupì— weightë¥¼ ëª…ì‹œí•´ë¼
            - ì‚¬ìš© ì˜ˆì‹œ: multiple versions of your app, blue/green deployment
            - ì–´í”Œë¦¬ì¼€ì´ì…˜ì— íŠ¸ëž˜í”½ ê°€ì¤‘ì¹˜ë¥¼ ì¡°ì ˆ ê°€ëŠ¥
            
            ![[image 16 5.png]]
            

### í•µì‹¬ ìš”ì•½

- í•µì‹¬ ìš”ì•½ ì ‘ê¸°
    - AI ìš”ì•½
        - **ë¡œë“œ ë°¸ëŸ°ì„œ ì¸ì¦ì„œì™€ ë³´ì•ˆ:** HTTPS ë¦¬ìŠ¤ë„ˆì—ëŠ” ê¸°ë³¸ ì¸ì¦ì„œê°€ í•„ìš”í•˜ë©°, SNIë¥¼ í†µí•´ ì—¬ëŸ¬ ë„ë©”ì¸ ì§€ì›ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
        - **Connection Draining:** ë¹„ì •ìƒ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ìœ ì˜ˆ ê¸°ê°„ì„ ì œê³µí•˜ì—¬ ê¸°ì¡´ ì—°ê²°ì„ ì•ˆì „í•˜ê²Œ ì¢…ë£Œí•©ë‹ˆë‹¤.
        - **í—¬ìŠ¤ ì²´í¬ì™€ ëª¨ë‹ˆí„°ë§:** ë‹¤ì–‘í•œ íƒ€ê²Ÿ ìƒíƒœë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ ê±´ê°•ì„ ê´€ë¦¬í•˜ê³ , ë¡œê·¸ì™€ ë©”íŠ¸ë¦­ì„ í†µí•´ ì„±ëŠ¥ì„ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.
        - **íƒ€ê²Ÿ ê·¸ë£¹ ì†ì„±:** ë“±ë¡ í•´ì œ ì§€ì—°, ëŠë¦° ì‹œìž‘ ëª¨ë“œ, ë¡œë“œ ë°¸ëŸ°ì‹± ì•Œê³ ë¦¬ì¦˜ ë“±ì„ ì„¤ì •í•˜ì—¬ ì„¸ë°€í•œ ì œì–´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
        - **ALB ê·œì¹™ê³¼ ê°€ì¤‘ì¹˜:** ë¦¬ìŠ¤ë„ˆ ê·œì¹™ì„ í†µí•´ ìš”ì²­ì„ ë¼ìš°íŒ…í•˜ê³ , íƒ€ê²Ÿ ê·¸ë£¹ ê°€ì¤‘ì¹˜ë¡œ íŠ¸ëž˜í”½ ë¶„ë°°ë¥¼ ì¡°ì ˆí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    - ì§ì ‘ ìš”ì•½
        - ë†’ì€ ê°€ìš©ì„±ì´ëž€? (High Availability
            
            íŠ¹ì • ì§€ì—­ì´ë‚˜ ì„œë¹„ìŠ¤ì— ë¬¸ì œê°€ ë°œìƒí•˜ë”ë¼ë„ ì„œë¹„ìŠ¤ë¥¼ ì§€ì›í•  ìˆ˜ ìžˆìŒì„ ë§í•œë‹¤. ë†’ì€ ê°€ìš©ì„±ì„ ìœ„í•´ì„œ AZ ë‚´ì˜ ë¬¸ì œê°€ ìƒê²¼ì„ ë•Œ, ë‹¤ë¥¸ AZì—ì„œ ì‹¤í–‰ë˜ëŠ” ì„œë¹„ìŠ¤ê°€ failoverë¡œ ì§€ì›ëœë‹¤.
            
        - ë†’ì€ í™•ìž¥ì„±ì´ëž€? (High Scalability)
            
            ìˆ˜í‰ì  í™•ìž¥ì„±ê³¼ ìˆ˜ì§ì  í™•ìž¥ì„±ìœ¼ë¡œ ë‚˜ë‰˜ë©° ì„œë¹„ìŠ¤ì˜ ìš”êµ¬ì¹˜ë¥¼ ë”°ë¼ê°€ì§€ ëª»í–ˆì„ ë•Œ, ê¸°ê³„ì˜ ìŠ¤íŽ™ì„ ë†’ì´ê±°ë‚˜ ì„œë¹„ìŠ¤ì˜ ê°œìˆ˜ë¥¼ ëŠ˜ë ¤ì„œ ì„œë¹„ìŠ¤ì˜ ì œê³µì„ ì›í• í•˜ê²Œ í•œë‹¤.
            
        - ELBì˜ ìŠ¤ì½”í”„
            
            ELBëŠ” íŠ¹ì • AZ ë‚´ì— í•œì •ë˜ë©° ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ì„œ Cross-Zone ì˜µì…˜ì„ ì‚¬ìš©í•´ì„œ ë™ì¼í•œ ë¦¬ì „ì— ì¡´ìž¬í•˜ëŠ” ë‹¤ë¥¸ AZì— íŠ¸ëž˜í”½ í¬ì›Œë”©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
            
        - ELB ì¢…ë¥˜
            
            CLB (Classic Load Balancer): êµ¬ë²„ì „ ë¡œë“œë°¸ëŸ°ì„œë¡œ HTTPì™€ TCPë¥¼ ì§€ì›í•œë‹¤.
            
              
            
            ALB (Application Load Balancer):
            
            - ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ ë¼ìš°íŒ…ì´ ê°€ëŠ¥í•˜ë‹¤.(URL ê¸°ë°˜, HOST Name ê¸°ë°˜, ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ë° í—¤ë” ê¸°ë°˜)
            - ê³ ì •ëœ í˜¸ìŠ¤íŠ¸ë„¤ìž„ì„ ê°€ì§„ë‹¤.
            
              
            
            NLB (Network Load Balancer):
            
            - 4ê³„ì¸µì¸ ì „ì†¡ ê³„ì¸µì„ ì‚¬ìš©í•˜ëŠ” ë¡œë“œë°¸ëŸ°ì„œë‹¤.
            - íƒ€ê²Ÿ ê·¸ë£¹ìœ¼ë¡œëŠ” IP, EC2 Instances, ALBê°€ ê°€ëŠ¥í•˜ë‹¤.
            
              
            
            GLB (Gateway Load Balancer):
            
            - 3ê³„ì¸µì¸ ë„¤íŠ¸ì›Œí¬ ê³„ì¸µì„ ì‚¬ìš©í•˜ëŠ” ë¡œë“œë°¸ëŸ°ì„œë‹¤.
            - ì„œë“œíŒŒí‹° ì†Œí”„íŠ¸ì›¨ì–´ ë°©í™”ë²½ì´ë‚˜ ì¹¨ìž… íŒ¨í‚· ë°©ì§€ ê°™ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ í†µí•´ì„œ íŒ¨í‚·ì„ ê²€ì‚¬í•  ìˆ˜ ìžˆë‹¤.
            - íƒ€ê²Ÿ ê·¸ë£¹ìœ¼ë¡œëŠ” IP, EC2 Instancesë‹¤.
            
              
            

### ë³µìŠµì•Œë¦¼

- 
- ìžë™ìœ¼ë¡œ í•¸ë“œí°ì— ì•Œë¦¼ì´ ì˜¤ë„ë¡ ì„¤ì •í•˜ê³  ì‹¶ìœ¼ë©´ ë‹¤ìŒê³¼ ê°™ì´ í•œë‹¤.

> [!important]  
> 