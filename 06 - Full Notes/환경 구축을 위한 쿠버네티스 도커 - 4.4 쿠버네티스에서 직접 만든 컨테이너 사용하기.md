---
â­•ì²« í•™ìŠµë‚ : 2024-07-13
â­•ê³¼ëª©: Kubernetes
â­•êµìž¬: ì»¨í…Œì´ë„ˆ ì¸í”„ë¼ í™˜ê²½ êµ¬ì¶•ì„ ìœ„í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ ë„ì»¤
â­•í•™ìŠµì •ë„: ðŸ˜¡í•˜
â¤1ì¼ë³µìŠµì—¬ë¶€: true
ðŸ§¡4ì¼ë³µìŠµì—¬ë¶€: true
ðŸ’›7ì¼ë³µìŠµì—¬ë¶€: true
ðŸ’š14ì¼ë³µìŠµì—¬ë¶€: true
ðŸ§ ìž¥ê¸°ê¸°ì–µ: false
ë³µìŠµ: ì¶”ê°€ ë³µìŠµ
ðŸ›‘ì²«ë‚ : "âœì²«ë‚  : 2024/07/13"
ðŸ›‘ì˜¤ëŠ˜: "â°ì˜¤ëŠ˜ : 2024/10/27"
ðŸ›‘ì²«í•™ìŠµí›„ ëª‡ì¼ì§¸?: ì²« í•™ìŠµ í›„ â¤106ì¼ì§¸â¤
ðŸ›‘4ì¼í›„: "ðŸ¥‰4ì¼ë’¤ : 2024/07/17"
ðŸ›‘7ì¼í›„: "ðŸ¥ˆ7ì¼ë’¤ : 2024/07/20"
ðŸ›‘14ì¼í›„: "ðŸ¥‡14ì¼ë’¤ : 2024/07/27"
4ì¼í›„: "@2024ë…„ 7ì›” 17ì¼"
4ì¼í›„(text): 2024/07/17
7ì¼í›„: "@2024ë…„ 7ì›” 20ì¼"
7ì¼í›„(text): 2024/07/20
14ì¼í›„: "@2024ë…„ 7ì›” 27ì¼"
14ì¼í›„(text): 2024/07/27
ì˜¤ëŠ˜1: "@2024ë…„ 10ì›” 27ì¼ ì˜¤í›„ 2:01"
ì˜¤ëŠ˜2: 2024/10/27
ì²«í•™ìŠµë‚ text: 2024/07/13
ì˜¤ëŠ˜ê³¼ ì²«í•™ìŠµë‚  ì‚¬ì´: "106"
ì‚¬ì´: "106"
"1ì¼ì°¨ë³µìŠµì—¬ë¶€1,0": "1"
"4ì¼ì°¨ë³µìŠµì—¬ë¶€1,0": "1"
"7ì¼ì°¨ë³µìŠµì—¬ë¶€1,0": "1"
"ìž¥ê¸°ê¸°ì–µì €ìž¥ì—¬ë¶€1,0": "0"
í•™ìŠµë¥ : "0.6"
ì§„í–‰ë°”: ðŸŸ©ðŸŸ©ðŸŸ©ðŸŸ©ðŸŸ©ðŸŸ©â¬œâ¬œâ¬œâ¬œ 60%
---
[[Kubernetes]] [[DevOps]] 
### ë‹¨ì„œ ì§ˆë¬¸

- ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ í˜¸ìŠ¤íŠ¸ì—ì„œ ìƒì„±í•œ ì´ë¯¸ì§€ë¥¼ í†µí•´ podì„ ìƒì„±í–ˆì„ ë•Œ ì‹¤íŒ¨í•˜ëŠ” ì´ìœ ëŠ”?
    
    ê¸°ë³¸ì ìœ¼ë¡œ ì´ë¯¸ì§€ëŠ” ë ˆì§€ìŠ¤íŠ¸ë¦¬ì—ì„œ ë‹¹ê²¨ì˜¤ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŒ. Dockerì˜ ê²½ìš° Docke Hubì—ì„œ ì´ë¯¸ì§€ë¥¼ ê°€ì§€ê³  ì˜¨ë‹¤. ë”°ë¼ì„œ, í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•œ Dockerfileì„ ì›Œì»¤ ë…¸ë“œì— ì„¤ì •í•˜ê³  íŒŸì„ ìƒì„±í•  ë•Œ í•´ë‹¹ íŒŸì€ ë¡œì»¬ì˜ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ê²Œ ì„¤ì •í•´ì•¼ í•œë‹¤.
    
    í˜¹ì€ Docker Hubì— ê°œì¸ìš© ì´ë¯¸ì§€ë¥¼ ë°°í¬í•˜ê±°ë‚˜ ì§ì ‘ ë§Œë“  ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ í†µí•´ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ ìžˆìŒ.
    
    ì§ì ‘ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ êµ¬ì¶•í•˜ë©´ ì†ŒìŠ¤ì½”ë“œë¥¼ ì™¸ë¶€ì— ë…¸ì¶œí•  í•„ìš” ì—†ë‹¤ëŠ” ì ì´ ê°•ì .
    

### í•µì‹¬ í•„ê¸°

- ì „ì²´ ë‚´ìš© ì ‘ê¸°
    
    # 4.4.1 ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ë„ì»¤ ì´ë¯¸ì§€ êµ¬ë™í•˜ê¸°
    
    ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ í˜¸ìŠ¤íŠ¸ì— ì¡´ìž¬í•˜ëŠ” ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ëž˜ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡  ì•ˆë©ë‹ˆë‹¤.
    
    ```Bash
    kubectl create deployment my-host-image --image=host-image
    ```
    
    ìœ„ì²˜ëŸ¼ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ê²½ìš° í˜¸ìŠ¤íŠ¸ì— ì¡´ìž¬í•˜ëŠ” ì´ë¯¸ì§€ê°€ ì•„ë‹Œ registryì— ë“±ë¡ëœ ì´ë¯¸ì§€ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.
    
      
    
    ë”°ë¼ì„œ, ìˆ˜í–‰í•  êµ¬ë¬¸ì„ yaml í˜•íƒœë¡œ ë§Œë“¤ê³  ë¡œì»¬ì˜ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.
    
    ```Bash
    kubectl create deployment failure2 --dry-run=client -o yaml\
    --image=multistage-img > failure2.yaml
    
    # --dry-run=client: ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ APIì— ìš”ì²­ì„ ë³´ë‚´ì§€ ì•Šê³  
    # ë‹¨ìˆœ ëª…ë ¹ ì‹¤í–‰ êµ¬ë¬¸ì„ í´ë¼ì´ì–¸íŠ¸ì—ì„œ í™•ì¸
    # -o yaml: ì‹¤í–‰ êµ¬ë¬¸ì„ yaml í˜•ì‹ìœ¼ë¡œ ì¶œë ¥
    # > failure2.yaml: ìœ„ì˜ ëª…ë ¹ì–´ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‹¤í–‰í•˜ëŠ” ëª…ë ¹ì„ yaml í˜•ì‹ìœ¼ë¡œ ì¶œë ¥
    
    cat failure2.yaml
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      creationTimestamp: null
      labels:
        app: failure2
      name: failure2
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: failure2
      strategy: {}
      template:
        metadata:
          creationTimestamp: null
          labels:
            app: failure2
        spec:
          containers:
          - image: local-image
            name: local-image
            resources: {}
    status: {}
    
    # ì—¬ê¸°ì— ì´ë¯¸ì§€ë¥¼ ë¡œì»¬ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” êµ¬ë¬¸ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      creationTimestamp: null
      labels:
        app: failure2
      name: failure2
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: failure2
      strategy: {}
      template:
        metadata:
          creationTimestamp: null
          labels:
            app: failure2
        spec:
          containers:
          - image: local-image
    	      imagePullPolicy: Never
            name: local-image
            resources: {}
    status: {}
    
    kubectl get pods
    NAME                          READY   STATUS              RESTARTS   AGE
    failure2-77cf6f656d-tz5cj     0/1     ErrImageNeverPull   0          6s
    ```
    
      
    
    ê·¸ëŸ¬ë‚˜, ìœ„ì²˜ëŸ¼ ì´ë¯¸ì§€ë¥¼ ì—¬ì „ížˆ ëª» ë•¡ê²¨ì˜¤ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    
    ì™œëƒ? í•´ë‹¹ ì›Œì»¤ë…¸ë“œì—” í•´ë‹¹ ì´ë¯¸ì§€ê°€ ì—†ìœ¼ë‹ˆê¹Œ. ë§ˆìŠ¤í„° ë…¸ë“œì— ë¡œì»¬ì— ë…ì»¤ ì´ë¯¸ì§€ê°€ ìžˆëŠ” ê±´ ìƒê´€ ì—†ìŠµë‹ˆë‹¤. ë¡œì»¬ì— ë…ì»¤ ì´ë¯¸ì§€ê°€ ìžˆëŠ” ê²Œ ì¤‘ìš”í•©ë‹ˆë‹¤.
    
    ì¦‰, í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ëŠ” íŒŒë“œë¥¼ ê°€ì§„ ì›Œì»¤ë…¸ë“œì— ë…ì»¤ ì´ë¯¸ì§€ê°€ ìžˆì–´ì•¼ í•©ë‹ˆë‹¤.
    
    ê·¸ëŸ¬ë‚˜, ë§¤ ë²ˆ ë…¸ë“œì— ë…ì»¤ ì´ë¯¸ì§€ë¥¼ ë³µì‚¬í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ìž…ë‹ˆë‹¤. ë”°ë¼ì„œ, ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì´ë¯¸ì§€ë¥¼ ë“±ë¡í•˜ê±°ë‚˜ ì§ì ‘ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ êµ¬ì„±í•´ì„œ í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ë”°ì˜¤ë„ë¡ í•˜ëŠ” ë°©ë²•ì´ ìžˆìŠµë‹ˆë‹¤.
    
      
    
      
    
    # 4.4.2 ë ˆì§€ìŠ¤íŠ¸ë¦¬ êµ¬ì„±í•˜ê¸°(p225)
    
    ë„ì»¤í—ˆë¸Œì˜ ê°œì¸ ì €ìž¥ì†ŒëŠ” ì´ë¯¸ì§€ 1ê°œ ì œí•œì´ë‹¤. ë” ì“°ë ¤ë©´ êµ¬ë…í•´ì•¼ë¨.
    
    ë”°ë¼ì„œ, ëˆì´ ì—†ìœ¼ë©´ ì‚¬ì„¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬(ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•œ ë ˆì§€ìŠ¤íŠ¸ë¦¬)ë¥¼ êµ¬í˜„í•´ì•¼ í•œë‹¤.
    
    ì‹¤ìŠµì„ ìœ„í•œ ë””ë ‰í„°ë¦¬ëŠ” 4.4.2ì— ìžˆìŒ.
    
    - create-registry.sh
        
        ![[Untitled 22.png]]
        
        ![[Untitled 1 9.png]]
        
        ![[Untitled 2 7.png]]
        
        ![[Untitled 3 6.png]]
        
          
        
          
        
    - CSR(Certificate Signing Request)
        
        CSRì„ ê¸°ë°˜ìœ¼ë¡œ ì¸ì¦ì„œì™€ ê°œì¸í‚¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
        
        ì›¹ì„œë²„ì—ì„œ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” CSR ì—†ì´ ëª…ë ¹ì¤„ì—ì„œ ì§ì ‘ ì¸ì¦ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
        
        í•˜ì§€ë§Œ ë„ì»¤ëŠ” ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì ‘ì†í•˜ëŠ” ê³¼ì •ì— **ì£¼ì²´ ëŒ€ì²´ ì´ë¦„(SAN, Subject Alternative Name)**ì´ë¼ëŠ” ì¶”ê°€ ì •ë³´ë¥¼ ê²€ì¦í•˜ê¸° ë•Œë¬¸ì— ì¶”ê°€ ì •ë³´ë¥¼ ê¸°ìž…í•´ ì¸ì¦ì„œë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.
        
        ![[Untitled 4 6.png]]
        

  

  

### í•µì‹¬ ìš”ì•½

- í•µì‹¬ ìš”ì•½ ì ‘ê¸°
    - í•™ìŠµë‚´ìš©ì„ ëª‡ë¬¸ìž¥ìœ¼ë¡œ ì••ì¶•í•˜ì—¬ ì •ë¦¬í•œë‹¤.

### ë³µìŠµì•Œë¦¼

- 
- ìžë™ìœ¼ë¡œ í•¸ë“œí°ì— ì•Œë¦¼ì´ ì˜¤ë„ë¡ ì„¤ì •í•˜ê³  ì‹¶ìœ¼ë©´ ë‹¤ìŒê³¼ ê°™ì´ í•œë‹¤.

> [!important]  
> 