[[포트폴리오]] [[취업]]
# 🀄포트폴리오를 진행하며 잊지 않아야 할 중심점

1. **결과물**

이 포트폴리오는 내 개인적인 흥미나 재미를 위해서 진행하는 프로젝트가 아니다. 취업을 위한 프로젝트다. 따라서, 확실한 결과물이 필요하다.

  

1. **멀티클라우드는 필수**

AWS 뿐만 아니라 Azure, NCP, 온프로미스를 모두 사용한다.

회사에서 요구하는 클라우드 지식은 특정된 클라우드 서비스에 편향된 지식이 아니라 클라우드 서비스 전반의 이해다. (AWS가 1등이므로 물론, 중요하지만, 국내 기업을 대상으로 하는 경우가 많으므로 국내 클라우드에 비중도 적지 않다. 어쩌면 AWS보다 더 비중이 클 수도)

  

1. **Agile 방식 도입**

to-do list를 캘린더로 작성하고 일정 계획표를 짜놔야 한다.

요구 사항으로는 온프로미스를 최우선으로 사용 (비용 절감을 위해서)

높은 가용성(High Availability)이 필요한 서비스는 최소한 온프로미스 환경에서 돌아가야 하며 서로 다른 두 개에 클라우드에서 돌아가야 한다.

  

1. **합리적인 MSA 구성 방식**

단순하게 도메인 별로 아키텍처를 구성하는 것이 아닌 기능별로 아키텍처를 나눈다. → 단, 이 방법은 디버깅할 때 귀찮을 수도 있다. 명확한 로그를 통해 어느 서비스에서 문제가 생겼는지 파악이 가능하다면 디버깅이 간단하겠지만 그렇지 않다면 어느 기능이 어느 서비스에서 사용 중인지 찾는 데 드는 노력이 도메인으로 서비스를 나누는 방식보다 찾기 힘들 것이다. 왜냐면, 도메인 별로 기능을 나누면 해당 기능에 문제가 생겼을 때 직관적으로 해당 기능을 다루는 서비스로 들어가면 되니까

  

1. 실패하거나 고생한 내용들은 노션에 히스토리 남기기

크게 고민하면 티스토리나 노션에 관련 글을 작성했지만 포트폴리오는 특히 이 문서에 작성해야 된다.

  

1. 클라우드 네이티브에 대한 고찰을 넣어라
2. 지표를 사용하라.
    
    과정이 들어가는 게 중요하다. ㅁㅁ를 하기 위해 ~를 도입했다. 그러나, 결과가 %가 나왔다. 이를 해결하기 위해 ~를 했다. 이후 결과가 % 나아졌다.
    

# 🗞️CI/CD 파이프라인

## CI

- 깃허브 액션을 통해서 구축

### 브랜치 전략

**main**

목적: 배포를 위한 브랜치

브랜치에서 진행될 작업: 배포

PR 규칙:

- develop → main

  

**develop**

목적: 개발을 위한 브랜치

브랜치에서 진행될 작업: feature 브랜치로부터 pr을 받아서 개발을 진행

부모 브랜치: main

PR 규칙:

- develop → main

  

**feature**

목적: 개발을 기능 별로 나누기 위한 브랜치

사용 방법

1. 깃허브 레포지토리의 기능을 위한 이슈 생성
2. 이슈에서 브랜치 생성한다. 부모 브랜치는 main이며 브랜치 명은 feature#[이슈 번호]

부모 브랜치: main

PR 규칙:

- feature#[이슈 번호] → develop

### 코드

Linting → 코드 커버리지 → 정적 코드 분석

### 빌드

빌드

### 테스트

동적 코드 분석 → 테스트 실행 → 테스트 결과에 따라 액션

### 결과물

Docker Image 생성 → Docker Hub에 업로드 → Terraform 트리거

## CD

- **Terraform**: 멀티 클라우드 인프라 리소스를 정의하고 관리하는 데 사용.
    - 비슷한 제품들
        - GCP의 Anthos
- **Ansible**: 생성된 서버들에 필요한 소프트웨어 및 환경 설정을 자동화.
    - 비슷한 제품들
        - AWS Cloudformation의 cfn-init
- **ArgoCD**: Kubernetes 환경에서 GitOps 방식으로 애플리케이션 배포와 관리를 자동화.

# 📏아키텍처

  

# ☁️사용할 클라우드

1. AWS: 명실상부 압도적 클라우드 업계 1위 기업이므로 꼭 필요함
2. NCP: 공공기관에서 사용하는 클라우드이므로 꼭 사용해야 한다.
3. Azure: 클라우드 2위 기업으로 AWS와는 상당한 차이가 있지만 그럼에도 16프로라는 높은 점유율을 가진다.

# 고려 사항

- 컨테이너의 크기 제한
    
    컨테이너 메모리 사이즈는 4GB ~ 32GB 보통 배포 4GB를 배포용으로 쓴다.
    
- 개인 맞춤형 서비스?
    
    개인에 대한 디테일한 내용들이 서비스에 반영되어야 한다.
    
- MSA 아키텍처를 나누는 기준
    
    방법1. 도메인 단위로 나누기 → 비효율적
    
    방법2. 소스코드 분석을 통해서 기능단위로 나누기 → 효율적, 개발속도가 빠름
    
- 공통 DB에 대한 처리 방법
    
    MSA는 서비스 별로 DB를 사용한다.(분산 DB) 그렇다면 동기화 문제가 발생할텐데 이를 어떻게 처리해야 할지
    
      
    

# 사용할 Tool

- 프론트엔트
    1. React
- 백엔드
    1. FastAPI
    2. SpringBoot
- 컨테이너
    1. Podman
    2. Docker
- IaC
    1. Terraform
    2. Ansible
- CI
    1. Github Action
- CD
    
    도구들의 선정 기준
    
    - 여러 클라우드 서비스와 온프로미스 모두 한 번에 설정이 가능해야 한다.
    - 이유:
        1. GCP의 Anthos나 AWS의 Cloudformation 등 여러 서비스가 있지만 이들은 공통적으로 사용이 불가능 → 클라우드 별로 환경 세팅 문제가 다를 가능성이 생긴다.
        2. 클라우드 서비스 별로 들어가서 관리해야 한다. →
    
    Terraform: 여러 클라우드 서비스와 온프로미스를 혼용으로 사용하면서 간단하게 프로비저닝 및 관리 가능
    
    Ansible: 인스턴스의 초기화 및 세팅을 간편하게 할 수 있음. ssh로 연결하므로 인스턴스는 22번 포트를 열어놔야 한다.
    
    ArgoCD: 깃허브 레포지토리를 관찰하다가 상태가 변화하면 해당 버전으로 업데이트
    
      
    

# 시행착오 및 배운 내용

- 스프링 4 이상 버전을 쓰는 이유
    
    3.대는 메모리 최적화가 안되어 있어서 프레임워크만 2기가 정도는 한다. 컨테이너 최저 메모리가 4기가인데 이러면 문제가 발생
    

큰글자 잡코리아

큰글자 유튜브