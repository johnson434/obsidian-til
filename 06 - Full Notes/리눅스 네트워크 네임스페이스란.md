---
â­•ì²« í•™ìŠµë‚ : 2024-08-08
â­•ê³¼ëª©: Linux
â¤1ì¼ë³µìŠµì—¬ë¶€: true
ğŸ§¡4ì¼ë³µìŠµì—¬ë¶€: true
ğŸ’›7ì¼ë³µìŠµì—¬ë¶€: true
ğŸ’š14ì¼ë³µìŠµì—¬ë¶€: true
ğŸ§ ì¥ê¸°ê¸°ì–µ: false
ë³µìŠµ: ì¶”ê°€ ë³µìŠµ
ğŸ›‘ì²«ë‚ : "âœì²«ë‚  : 2024/08/08"
ğŸ›‘ì˜¤ëŠ˜: "â°ì˜¤ëŠ˜ : 2024/10/27"
ğŸ›‘ì²«í•™ìŠµí›„ ëª‡ì¼ì§¸?: ì²« í•™ìŠµ í›„ â¤80ì¼ì§¸â¤
ğŸ›‘4ì¼í›„: "ğŸ¥‰4ì¼ë’¤ : 2024/08/12"
ğŸ›‘7ì¼í›„: "ğŸ¥ˆ7ì¼ë’¤ : 2024/08/15"
ğŸ›‘14ì¼í›„: "ğŸ¥‡14ì¼ë’¤ : 2024/08/22"
4ì¼í›„: "@2024ë…„ 8ì›” 12ì¼"
4ì¼í›„(text): 2024/08/12
7ì¼í›„: "@2024ë…„ 8ì›” 15ì¼"
7ì¼í›„(text): 2024/08/15
14ì¼í›„: "@2024ë…„ 8ì›” 22ì¼"
14ì¼í›„(text): 2024/08/22
ì˜¤ëŠ˜1: "@2024ë…„ 10ì›” 27ì¼ ì˜¤í›„ 2:01"
ì˜¤ëŠ˜2: 2024/10/27
ì²«í•™ìŠµë‚ text: 2024/08/08
ì˜¤ëŠ˜ê³¼ ì²«í•™ìŠµë‚  ì‚¬ì´: "80"
ì‚¬ì´: "80"
"1ì¼ì°¨ë³µìŠµì—¬ë¶€1,0": "1"
"4ì¼ì°¨ë³µìŠµì—¬ë¶€1,0": "1"
"7ì¼ì°¨ë³µìŠµì—¬ë¶€1,0": "1"
"ì¥ê¸°ê¸°ì–µì €ì¥ì—¬ë¶€1,0": "0"
í•™ìŠµë¥ : "0.6"
ì§„í–‰ë°”: ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©â¬œâ¬œâ¬œâ¬œ 60%
---
[[Linux]] [[03 - Tags/Network]]
### ë‹¨ì„œ ì§ˆë¬¸

- ë¦¬ëˆ…ìŠ¤ì˜ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë€?
    
    ë¦¬ëˆ…ìŠ¤ëŠ” ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ í†µí•´ì„œ ë„¤íŠ¸ì›Œí¬ë¥¼ ê²©ë¦¬í•©ë‹ˆë‹¤. ë…¸ë“œì—ì„  ë£¨íŠ¸ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ê°€ ì¡´ì¬í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ê°€ ì„œë¡œ ë‹¤ë¥´ë©´ ì„œë¡œ ì˜í–¥ì„ ë¼ì¹  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
    
    Dockerë¥¼ í†µí•´ ì»¨í…Œì´ë„ˆë¥¼ ìƒì‚°í•˜ëŠ” ê²½ìš°, dockerëŠ” ë¦¬ëˆ…ìŠ¤ì˜ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ í†µí•˜ì—¬ ìì‹ ë§Œì˜ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. í˜¸ìŠ¤íŠ¸ OSì˜ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì™€ ì»¨í…Œì´ë„ˆì˜ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì—°ê²°í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ Dockerì˜ ë¸Œë¦¿ì§€ ëª¨ë“œê°€ ì‚¬ìš©ë©ë‹ˆë‹¤.
    
    Dockerì˜ ë¸Œë¦¿ì§€ ëª¨ë“œëŠ” í˜¸ìŠ¤íŠ¸ OSì˜ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— docker0ë¼ëŠ” ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“­ë‹ˆë‹¤. ì´í›„ì— veth(ê°€ìƒì´ë”ë„·)ì„ í†µí•´ì„œ ì»¨í…Œì´ë„ˆì™€ í˜¸ìŠ¤íŠ¸ OSì˜ ë„¤íŠ¸ì›Œí‚¹ì„ ì§„í–‰í•©ë‹ˆë‹¤.
    

### í•µì‹¬ í•„ê¸°

- ì „ì²´ ë‚´ìš© ì ‘ê¸°
    
    # ë¦¬ëˆ…ìŠ¤ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë€?
    
    - ==í•˜ë‚˜ì˜ í˜¸ìŠ¤íŠ¸ì—ì„œ ì—¬ëŸ¬ ê°œì˜ ê²©ë¦¬ëœ ë„¤íŠ¸ì›Œí¬ ê³µê°„ì„ í˜•ì„±==í•˜ëŠ” ê¸°ìˆ .
        - í˜¸ìŠ¤íŠ¸ ìì²´ë„ í•˜ë‚˜ì˜ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê°€ì§„ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤ â†’ Root Namespace
        - ì¦‰, ì¼ë°˜ì ìœ¼ë¡œ í˜¸ìŠ¤íŠ¸ì˜ 1ë²ˆ í”„ë¡œì„¸ìŠ¤(init)ì— í• ë‹¹ëœ Root Namespaceë¥¼, ìì‹ í”„ë¡œì„¸ìŠ¤ë“¤ì´ ëª¨ë‘ ê³µìœ í•˜ëŠ” êµ¬ì¡°ë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤.
    - ==ê° ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë§ˆë‹¤== ==ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤, ë¼ìš°íŒ… í…Œì´ë¸”, í¬ì›Œë”© í…Œì´ë¸”ì„ ê°€ì§„ë‹¤.==
    - ê²©ë¦¬ëœ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— í• ë‹¹ëœ í”„ë¡œì„¸ìŠ¤ëŠ”, ë‹¤ë¥¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ì—†ë‹¤.
    - ë¦¬ëˆ…ìŠ¤ëŠ” ë„¤íŠ¸ì›Œí¬ ì™¸ì—ë„ ë‹¤ì–‘í•œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì§€ì›í•œë‹¤. ë„¤ì„ìŠ¤í˜ì´ìŠ¤ëŠ” ì»¨í…Œì´ë„ˆ(container) ê¸°ë°˜ì˜ ê°€ìƒí™” ê¸°ìˆ ì„ ì§€íƒ±í•˜ëŠ” ì£¼ìš” ê¸°ëŠ¥.
    
    > [!important]  
    > ì‹¤ìŠµì´ í•„ìš”í•  ê²½ìš°, ê°€ìƒë¨¸ì‹ ì„ ì‚¬ìš©í•  ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” Ubuntu 20.04ë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.  
      
    > [!important]  
    > ì•„ë˜ ì‹¤ìŠµ ìë£ŒëŠ” â€˜ì°¸ê³ ìë£Œâ€™ ì„¹ì…˜ì—ì„œ ì†Œê°œí•˜ëŠ” 44bits ë¸”ë¡œê·¸ì˜ ì˜ˆì œë¥¼ ë”°ë¦…ë‹ˆë‹¤.  
    
    # ë¦¬ëˆ…ìŠ¤ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì‹¤ìŠµ
    
    - í˜¸ìŠ¤íŠ¸ì™€ ê²©ë¦¬ëœ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— Nginx ì„œë²„ë¥¼ ë„ìš°ê³ , ì ‘ì†í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤.
    - `ip` ëª…ë ¹ì–´ë¥¼ ë§ì´ ì‚¬ìš©í•  ì˜ˆì •â€¦ ì´ ê¹€ì— ì¹œìˆ™í•´ì§€ì!
    
    ```Bash
           Host
           +--------------------------------------------------+
           |                                 +--------------+ |
       [lo]+                             [lo]+              | |
           |                                 |    [Nginx]   | |
     [eth0]+                +-------->[veth1]+              | |
           |                |                |  direct_netns| |
    [veth0]+<---------------+                +--------------+ |
           |                                                  |
           |                                   Root Namespace |
           +--------------------------------------------------+
    ```
    
    ## 1. ë„¤íŠ¸ì›Œí¬ ë””ë°”ì´ìŠ¤ í™•ì¸
    
    - ë¨¼ì €, í˜¸ìŠ¤íŠ¸ì˜ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ í™•ì¸í•œë‹¤.
    
    ```Bash
    $ ip link
    1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
        link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 9001 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
        link/ether 02:18:ce:0d:00:12 brd ff:ff:ff:ff:ff:ff
    ```
    
    ## 2. ê°€ìƒ ì¸í„°í˜ì´ìŠ¤ ë§Œë“¤ê¸°
    
    - í˜¸ìŠ¤íŠ¸ì™€ ìƒˆë¡œìš´ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì—°ê²°í•˜ëŠ” ê°€ìƒ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.
    - `veth` : ê°€ìƒ ì´ë”ë„· ì¸í„°í˜ì´ìŠ¤(Virtual Ethernet Interface)ë¥¼ ì˜íˆí•˜ë©°, í•­ìƒ ìŒìœ¼ë¡œ ë§Œë“¤ì–´ì§„ë‹¤. `veth` pairë¡œ ì„œë¡œ ë‹¤ë¥¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì—°ê²°í•œë‹¤.
    
    ```Bash
    # veth0ê³¼ veth1ì„ ë§Œë“ ë‹¤.
    $ sudo ip link add veth0 type veth peer name veth1
    
    # ë§Œë“¤ì–´ì§„ ê°€ìƒ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ í™•ì¸.
    $ ip -br link
    lo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP>
    eth0             UP             02:18:ce:0d:00:12 <BROADCAST,MULTICAST,UP,LOWER_UP>
    veth1@veth0      DOWN           be:d4:d8:12:d3:e8 <BROADCAST,MULTICAST,M-DOWN>
    veth0@veth1      DOWN           5a:ce:e1:3b:6a:17 <BROADCAST,MULTICAST,M-DOWN>
    ```
    
    ## 3. ìƒˆë¡œìš´ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë§Œë“¤ê¸°
    
    - `direct_netns`ë¼ëŠ” ì´ë¦„ì˜ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ë§Œë“ ë‹¤.
    - `netns` ì˜¤ë¸Œì íŠ¸ëŠ” ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê´€ë¦¬í•œë‹¤.
    - í•´ë‹¹ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ëŠ” `/var/run/netns/` ì•ˆì— ìƒì„±ëœë‹¤. í•˜ì§€ë§Œ í•´ë‹¹ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ ë„¤íŠ¸ì›Œí¬ ì„¤ì •ì„ í•´ì•¼í•˜ëŠ” ê²½ìš°, `/etc/netns/<NAME>/` ê²½ë¡œì—ì„œ ìˆ˜ì •ì„ í•´ì•¼í•œë‹¤.
        - ê°€ë ¹, ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ `resolv.conf` íŒŒì¼ì„ ë”°ë¡œ ë§Œë“¤ê³  ì‹¶ì€ ê²½ìš°, `/etc/netns/<NAME>/resolv.conf` íŒŒì¼ì„ ìƒì„±/ìˆ˜ì •í•´ì•¼ í•œë‹¤.
    
    ```Bash
    $ sudo ip netns add direct_netns
    
    # ë§Œë“¤ì–´ì§„ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ëª©ë¡ í™•ì¸í•˜ê¸°.
    $ ip netns list  # ë˜ëŠ” ls /var/run/netns
    direct_netns
    ```
    
    - `ip netns exec`ìœ¼ë¡œ íŠ¹ì • ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤.
    - í•˜ì§€ë§Œ ë§¤ë²ˆ ìœ„ ëª…ë ¹ì–´ ì…ë ¥í•˜ê¸°ê°€ ìŠ¬ìŠ¬ ê·€ì°®ì•„ì§„ë‹¤ë©´, `ip netns exec bash`ë¡œ í•´ë‹¹ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ë“¤ì–´ê°€, í˜¸ìŠ¤íŠ¸ì—ì„œì™€ ë™ì¼í•˜ê²Œ ì»¤ë§¨ë“œë¥¼ ì…ë ¥í•  ìˆ˜ë„ ìˆë‹¤. (ë¬¼ë¡  `exit` ëª…ë ¹ì–´ë¡œ ì–¸ì œë“ ì§€ ë‚˜ì˜¬ ìˆ˜ ìˆë‹¤.)
    
    ```Bash
    # direct_netnsì—ì„œ ip ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬, í•´ë‹¹ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ í™•ì¸.
    $ sudo ip netns exec direct_netns ip -br link
    lo               DOWN           00:00:00:00:00:00 <LOOPBACK>
    ```
    
    ## 4. ê²©ë¦¬ëœ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ Nginx ì„œë²„ ì‹¤í–‰í•˜ê¸°
    
    - `direct_netns` ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ë£¨í”„ë°± ì¸í„°í˜ì´ìŠ¤ë¥¼ í™œì„±í™”í•œë‹¤.
    
    ```Bash
    $ sudo ip netns exec direct_netns ip link set dev lo up
    $ sudo ip netns exec direct_netns ip -br link
    lo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP>
    ```
    
    - í˜¸ìŠ¤íŠ¸ì— Nginxë¥¼ ì„¤ì¹˜í•˜ê³ , í˜¸ìŠ¤íŠ¸ ìœ„ì—ì„œ ë™ì‘í•˜ì§€ ì•Šë„ë¡ ì„¤ì •í•œë‹¤.
    
    ```Bash
    $ sudo apt updage
    $ sudo apt install nginx-core
    
    # nginx ë™ì‘ í™•ì¸
    $ curl 127.0.0.1
    
    # ë§Œì•½ ì›¹í˜ì´ì§€ ë°ì´í„°ê°€ ë¶ˆëŸ¬ì™€ì§„ë‹¤ë©´, ì„œë¹„ìŠ¤ë¥¼ ì¤‘ì§€í•œë‹¤.
    $ sudo systemctl stop nginx
    $ sudo systemctl disable nginx
    ```
    
    - Nginxë¥¼ `direct_netns`ì˜ í¬ì–´ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰í•œë‹¤.
    
    ```Bash
    $ sudo ip netns exec direct_netns nginx -g 'daemon off;'
    ```
    
    - í„°ë¯¸ë„ ì°½ì„ ìƒˆë¡œ ì—´ì–´ì„œ, í˜¸ìŠ¤íŠ¸ì™€ `direct_netns` ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ì—°ê²° ìƒíƒœë¥¼ í™•ì¸í•œë‹¤.
    - `direct_netns`ì˜ Nginx ì„œë²„ëŠ” ì˜ ëŒì•„ê°€ëŠ” ìƒíƒœ.
    - í•˜ì§€ë§Œ ì•„ì§ ë‘ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ê°€ ì—°ê²°ë˜ì§€ ì•Šì•˜ê¸°ì—, í˜¸ìŠ¤íŠ¸ì—ì„œ `direct_netns`ì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¡œ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.
    
    ```Bash
    # direct_netnsì˜ Nginx ì„œë²„ëŠ” ì˜ ëŒì•„ê°„ë‹¤.
    $ sudo ip netns exec direct_netns curl 127.0.0.1
    <!DOCTYPE html>
    ...
    
    # í•˜ì§€ë§Œ í˜¸ìŠ¤íŠ¸ì—ì„œ direct_netnsì˜ Nginx ì„œë²„ë¡œ ì ‘ê·¼í•  ìˆ˜ëŠ” ì—†ë‹¤.
    $ curl 127.0.0.1
    curl: (7) Failed to connect to 127.0.0.1 port 80: Connection refused
    ```
    
    ```Bash
           Host
           +--------------------------------------------------+
           |                                 +--------------+ |
       [lo]+                             [lo]+              | |
           |                                 |    [Nginx]   | |
     [eth0]+                                 |              | |
           |                                 |  direct_netns| |
    [veth0]+<---+                            +--------------+ |
           |    |                                             |
    [veth1]+<---+                              Root Namespace |
           +--------------------------------------------------+
    ```
    
    ## 5. ê° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê°€ìƒ ì¸í„°í˜ì´ìŠ¤ë¡œ ì—°ê²°í•˜ê¸°
    
    - í˜„ì¬ `veth0(@veth1)`ê³¼ `veth1(@veth0)` ì¸í„°í˜ì´ìŠ¤ëŠ” ëª¨ë‘ í˜¸ìŠ¤íŠ¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ìˆëŠ” ìƒíƒœ.
    - `veth0`ì€ í˜¸ìŠ¤íŠ¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ë‚¨ê²¨ë†“ê³ , `veth1`ì„ `direct_netns`ì— ì˜®ê²¨ë†“ëŠ”ë‹¤.
    
    ```Bash
    $ sudo ip link set veth1 netns direct_netns
    
    # í˜¸ìŠ¤íŠ¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ë„¤íŠ¸ì›Œí¬ ë””ë°”ì´ìŠ¤ ëª©ë¡ ì¶œë ¥
    $ ip -br link
    lo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP>
    eth0             UP             02:18:ce:0d:00:12 <BROADCAST,MULTICAST,UP,LOWER_UP>
    veth0@if3        DOWN           5a:ce:e1:3b:6a:17 <BROADCAST,MULTICAST>
    
    # direct_netns ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ë„¤íŠ¸ì›Œí¬ ë””ë°”ì´ìŠ¤ ëª©ë¡ ì¶œë ¥
    $ sudo ip netns exec direct_netns ip -br link
    lo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP>
    veth1@if4        DOWN           be:d4:d8:12:d3:e8 <BROADCAST,MULTICAST>
    ```
    
    - ê°€ìƒ ì¸í„°í˜ì´ìŠ¤ë¥¼ í™œì„±í™”í•˜ê¸° ìœ„í•´ì„ , ë¨¼ì € IPë¥¼ í• ë‹¹í•´ì•¼ í•œë‹¤.
    
    ```Bash
    # í˜¸ìŠ¤íŠ¸ì˜ veth0 ì¸í„°í˜ì´ìŠ¤ì— IP í• ë‹¹
    $ sudo ip a add 10.200.0.2/24 dev veth0
    
    # direct_netnsì˜ veth1 ì¸í„°í˜ì´ìŠ¤ì— IP í• ë‹¹
    $ sudo ip netns exec direct_netns ip a add 10.200.0.3/24 dev veth1
    ```
    
    - `ping`ìœ¼ë¡œ ê° ì¸í„°í˜ì´ìŠ¤ì˜ í™œì„± ìƒíƒœë¥¼ í™•ì¸í•´ë³¸ë‹¤.
    
    ```Bash
    $ ping 10.200.0.3
    PING 10.200.0.3 (10.200.0.3) 56(84) bytes of data.
    64 bytes from 10.200.0.3: icmp_seq=1 ttl=64 time=0.043 ms
    64 bytes from 10.200.0.3: icmp_seq=2 ttl=64 time=0.039 ms
    ^C
    --- 10.200.0.3 ping statistics ---
    2 packets transmitted, 2 received, 0% packet loss, time 1029ms
    rtt min/avg/max/mdev = 0.039/0.041/0.043/0.002 ms
    
    $ sudo ip netns exec direct_netns ping 10.200.0.2
    PING 10.200.0.2 (10.200.0.2) 56(84) bytes of data.
    64 bytes from 10.200.0.2: icmp_seq=1 ttl=64 time=0.023 ms
    64 bytes from 10.200.0.2: icmp_seq=2 ttl=64 time=0.035 ms
    ^C
    --- 10.200.0.2 ping statistics ---
    2 packets transmitted, 2 received, 0% packet loss, time 1029ms
    rtt min/avg/max/mdev = 0.023/0.029/0.035/0.006 ms
    ```
    
    - ë§ˆì§€ë§‰ìœ¼ë¡œ, `direct_netns`ì—ì„œ ì‹¤í–‰ë˜ëŠ” Nginxë¥¼, `veth` ì¸í„°í˜ì´ìŠ¤ë¡œ í˜¸ìŠ¤íŠ¸ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•´ë³¸ë‹¤.
    
    ```Bash
    $ curl 10.200.0.3
    <!DOCTYPE html>
    ...
    ```
    
    ```Bash
           Host
           +--------------------------------------------------+
           |                                 +--------------+ |
       [lo]+                             [lo]+              | |
           |                                 |    [Nginx]   | |
     [eth0]+                +-------->[veth1]+              | |
           |                |      10.200.0.3|  direct_netns| |
    [veth0]+<---------------+                +--------------+ |
    10.200.0.2                                                |
           |                                   Root Namespace |
           +--------------------------------------------------+
    ```
    
    ---
    
    # ì°¸ê³ ìë£Œ
    
    > [!info] ipë¡œ ì§ì ‘ ë§Œë“¤ì–´ë³´ëŠ” ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì™€ ë¸Œë¦¬ì§€ ë„¤íŠ¸ì›Œí¬ - ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ ê¸°ì´ˆ 2í¸  
    > ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ ê¸°ì´ˆ 1í¸ì—ì„œëŠ” ë¦¬ëˆ…ìŠ¤ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì¤‘ í•˜ë‚˜ì¸ UTS ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ëŒ€í•´ì„œ ì†Œê°œ í–ˆìŠµë‹ˆë‹¤.  
    > [https://www.44bits.io/ko/post/container-network-2-ip-command-and-network-namespace](https://www.44bits.io/ko/post/container-network-2-ip-command-and-network-namespace)  
    
    > [!info] veth: ë¦¬ëˆ…ìŠ¤ ê°€ìƒ ì´ë”ë„· ì¸í„°í˜ì´ìŠ¤ë€?  
    > vethëŠ” ë¦¬ëˆ…ìŠ¤ì˜ ë²„ì¶”ì–¼ ì´ë”ë„· ì¸í„°í˜ì´ìŠ¤ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.  
    > [https://www.44bits.io/ko/keyword/veth](https://www.44bits.io/ko/keyword/veth)  
    
    > [!info] Introduction to Linux Network Namespaces  
    > An introduction to Linux network namespaces.  
    > [https://www.youtube.com/watch?v=_WgUwUf1d34](https://www.youtube.com/watch?v=_WgUwUf1d34)  
    
    > [!info] ip-netns(8) - Linux manual page  
    >  
    > [https://www.man7.org/linux/man-pages/man8/ip-netns.8.html](https://www.man7.org/linux/man-pages/man8/ip-netns.8.html)  
    

### í•µì‹¬ ìš”ì•½

- í•µì‹¬ ìš”ì•½ ì ‘ê¸°
    - í•™ìŠµë‚´ìš©ì„ ëª‡ë¬¸ì¥ìœ¼ë¡œ ì••ì¶•í•˜ì—¬ ì •ë¦¬í•œë‹¤.

### ë³µìŠµì•Œë¦¼

- 
- ìë™ìœ¼ë¡œ í•¸ë“œí°ì— ì•Œë¦¼ì´ ì˜¤ë„ë¡ ì„¤ì •í•˜ê³  ì‹¶ìœ¼ë©´ ë‹¤ìŒê³¼ ê°™ì´ í•œë‹¤.

> [!important]  
> 