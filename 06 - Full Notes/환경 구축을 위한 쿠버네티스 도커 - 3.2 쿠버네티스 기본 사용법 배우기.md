---
â­•ì²« í•™ìŠµë‚ : 2024-07-07
â­•ê³¼ëª©: Kubernetes
â­•êµì¬: ì»¨í…Œì´ë„ˆ ì¸í”„ë¼ í™˜ê²½ êµ¬ì¶•ì„ ìœ„í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ ë„ì»¤
â­•í˜ì´ì§€: p93~
â­•í•™ìŠµì •ë„: ğŸ¤”ì¤‘
â¤1ì¼ë³µìŠµì—¬ë¶€: true
ğŸ§¡4ì¼ë³µìŠµì—¬ë¶€: true
ğŸ’›7ì¼ë³µìŠµì—¬ë¶€: true
ğŸ’š14ì¼ë³µìŠµì—¬ë¶€: true
ğŸ§ ì¥ê¸°ê¸°ì–µ: false
ë³µìŠµ: ì¶”ê°€ ë³µìŠµ
ğŸ›‘ì²«ë‚ : "âœì²«ë‚  : 2024/07/07"
ğŸ›‘ì˜¤ëŠ˜: "â°ì˜¤ëŠ˜ : 2024/10/27"
ğŸ›‘ì²«í•™ìŠµí›„ ëª‡ì¼ì§¸?: ì²« í•™ìŠµ í›„ â¤112ì¼ì§¸â¤
ğŸ›‘4ì¼í›„: "ğŸ¥‰4ì¼ë’¤ : 2024/07/11"
ğŸ›‘7ì¼í›„: "ğŸ¥ˆ7ì¼ë’¤ : 2024/07/14"
ğŸ›‘14ì¼í›„: "ğŸ¥‡14ì¼ë’¤ : 2024/07/21"
4ì¼í›„: "@2024ë…„ 7ì›” 11ì¼"
4ì¼í›„(text): 2024/07/11
7ì¼í›„: "@2024ë…„ 7ì›” 14ì¼"
7ì¼í›„(text): 2024/07/14
14ì¼í›„: "@2024ë…„ 7ì›” 21ì¼"
14ì¼í›„(text): 2024/07/21
ì˜¤ëŠ˜1: "@2024ë…„ 10ì›” 27ì¼ ì˜¤í›„ 2:01"
ì˜¤ëŠ˜2: 2024/10/27
ì²«í•™ìŠµë‚ text: 2024/07/07
ì˜¤ëŠ˜ê³¼ ì²«í•™ìŠµë‚  ì‚¬ì´: "112"
ì‚¬ì´: "112"
"1ì¼ì°¨ë³µìŠµì—¬ë¶€1,0": "1"
"4ì¼ì°¨ë³µìŠµì—¬ë¶€1,0": "1"
"7ì¼ì°¨ë³µìŠµì—¬ë¶€1,0": "1"
"ì¥ê¸°ê¸°ì–µì €ì¥ì—¬ë¶€1,0": "0"
í•™ìŠµë¥ : "0.6"
ì§„í–‰ë°”: ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©â¬œâ¬œâ¬œâ¬œ 60%
---
[[Kubernetes]] [[DevOps]] 
### ë‹¨ì„œ ì§ˆë¬¸

- ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ëŒ€í‘œì ì¸ ì˜¤ë¸Œì íŠ¸ 4ê°€ì§€
    1. **íŒŒë“œ**: í•œ ê°€ì§€ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ í•œ ê°œ ì´ìƒì˜ ì»¨í…Œì´ë„ˆ ì§‘í•©
    2. **ë³¼ë¥¨**: ì˜êµ¬ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ì˜¤ë¸Œì íŠ¸
    3. **ë„¤ì„ìŠ¤í˜ì´ìŠ¤**: ë¦¬ì†ŒìŠ¤ë¥¼ êµ¬ë¶„í•˜ëŠ” ê·¸ë£¹
    4. **ì„œë¹„ìŠ¤**: íŒŒë“œì™€ ì™¸ë¶€ì— ì—°ê²°ì„ ì§€ì›í•˜ëŠ” ì„œë¹„ìŠ¤
- ë””í”Œë¡œì´ë¨¼íŠ¸(Deployment)ë€?
    
    ë””í”Œë¡œì´ë¨¼íŠ¸ëŠ” ê¸°ë³¸ ì˜¤ë¸Œì íŠ¸ì— ê¸°ëŠ¥ë“¤ì„ ì¶”ê°€í•´ êµ¬í˜„í•œ ê²ƒì…ë‹ˆë‹¤. ëŒ€í‘œì ì¸ ì˜ˆë¡œëŠ” ë ˆí”Œë¦¬ì¹´ì…‹ì— ë¡¤ë§ ì—…ë°ì´íŠ¸(zero down time update)ë‚˜ ë¡¤ë§ ë‹¤ìš´(ë²„ì „ ë‹¤ìš´) ê¸°ëŠ¥ì„ ì¶”ê°€í•œ ê²ƒì´ ìˆìŠµë‹ˆë‹¤.
    
- kubectl drain [ë…¸ë“œ ì´ë¦„] ëª…ë ¹ì–´ì˜ ì—­í• ì€?
    
    í•´ë‹¹ ë…¸ë“œì— ì†í•œ ëª¨ë“  íŒŒë“œë¥¼ ë‹¤ë¥¸ ë…¸ë“œë¡œ ì˜®ê¸´ë‹¤. í•´ë‹¹ ë…¸ë“œì— ë¬¸ì œê°€ ë°œìƒí–ˆê±°ë‚˜ êµì²´ê°€ í•„ìš”í•  ë•Œ ì‚¬ìš©í•œë‹¤.
    
- kubectl apply ëª…ë ¹ì–´ì˜ ì—­í• ì€?
    
    í•´ë‹¹ ì˜¤ë¸Œì íŠ¸ì˜ ì„¤ì •ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
    
- ë ˆí”Œë¦¬ì¹´ì…‹ì˜ ê°œìˆ˜ë¥¼ ëŠ˜ë ¤ì„œ íŒŒë“œì˜ ê°œìˆ˜ë¥¼ ëŠ˜ë¦¬ëŠ” ëª…ë ¹ì–´ëŠ”?
    
    ```Python
    kubectl scale deployment [deploymentëª…] --replicas=[ì›í•˜ëŠ” ê°œìˆ˜]
    ```
    
- ì¿ ë²„ë„¤í‹°ìŠ¤ íŒŒë“œì˜ ë²„ì „ ì—…ë°ì´íŠ¸ ëª…ë ¹ì–´ëŠ”?
    
    ```Bash
    kubectl set image deployment [deployment ì´ë¦„] nginx=nginx:1.17.23 --record
    kubectl rollout status deployment [deployment ì´ë¦„]
    kubectl describe deployment [deployment ì´ë¦„]
    
    kubectl rollout history deployment [deployment ì´ë¦„]
    ```
    
- ì¿ ë²„ë„¤í‹°ìŠ¤ ë²„ì „ ì—…ë°ì´íŠ¸ ì·¨ì†Œ ëª…ë ¹ì–´ëŠ”?
    
    ```Bash
    kubectl rollout undo deployment [deployment ì´ë¦„]
    ```
    
- íŠ¹ì • ì‹œì ìœ¼ë¡œ ë¡¤ë§ë‹¤ìš´í•˜ëŠ” ë°©ë²•ì€
    
    ```Bash
    kubectl rollout undo deployment rollout-nginx --to-revision=1
    ```
    
- Docker COPYì—ì„œ ì „ì²´ ì†ŒìŠ¤ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ” ì´ìœ 
    
    Docker RUNì€ ì´ì „ ëª…ë ¹ì–´ì˜ ê²°ê³¼ê°€ ë³€ê²½ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ìºì‹œë¥¼ ì¬ì‚¬ìš©í•©ë‹ˆë‹¤.
    
    ì˜ˆë¥¼ ë“¤ì–´, COPY ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ package.json íŒŒì¼ì„ ë³µì‚¬í–ˆëŠ”ë° íŒŒì¼ì˜ í•´ì‹œê°’ì— ë³€ê²½ì´ ì¼ì–´ë‚˜ì§€ ì•Šì•˜ë‹¤ë©´ COPYì˜ ê²°ê³¼ëŠ” ë³€ê²½ë˜ì§€ ì•Šì€ ê²ƒì´ê³  Docker RUNì€ ì´ë¥¼ ë³´ê³  ëª…ë ¹ì–´ì˜ ê²°ê³¼ê°€ ë³€ê²½ë˜ì§€ ì•Šì•˜ë‹¤ê³  íŒë‹¨í•´ì„œ ì´ì „ ìºì‹± ê²°ê³¼ë¥¼ ì¬ì‚¬ìš©í•©ë‹ˆë‹¤.
    
- FROMì„ ì‚¬ìš©í•  ë•Œ ì£¼ì˜í• ì 
    
    ë§Œì•½ì—, FROMì„ ì‚¬ìš©í•  ë•Œ nginx:alpineì²˜ëŸ¼ nginx ë² ì´ìŠ¤ ì´ë¯¸ì§€ ê¸°ë°˜ìœ¼ë¡œ ì‹¤í–‰í•˜ë©´ êµ³ì´ CMDë¡œ nginxë¡œ ì‹¤í–‰í•  í•„ìš”ê°€ ì—†ë‹¤. ì• ì´ˆì— ë² ì´ìŠ¤ ì´ë¯¸ì§€ ìì²´ê°€ nginxë¥¼ êµ¬ë™í•˜ëŠ”ë° CMDë¡œ ë‹¤ì‹œ nginxë¥¼ êµ¬ë™í•˜ëŠ” ê²ƒì€ ì˜ë¯¸ê°€ ì—†ëŠ” í–‰ë™ì´ë‹¤. êµ³ì´ í•˜ë ¤ë©´ ëª…ë ¹ì–´ ì¸ìë¡œ ê°’ì„ ì „ë‹¬í•˜ê³  ì‹¶ì„ ë• ê·¸ë ‡ê²Œ ì‚¬ìš©í•´ë„ ëœë‹¤. ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ Dockerfileì— ë ˆì´ì–´ë¥¼ í•˜ë‚˜ ì¶”ê°€í•˜ëŠ” í–‰ë™ì¼ë¿ Dockerfileì˜ ë ˆì´ì–´ê°€ ë¬´ê±°ì›Œì§€ê¸°ë§Œ í•œë‹¤.
    
      
    

### í•µì‹¬ í•„ê¸°

- ì „ì²´ ë‚´ìš© ì ‘ê¸°
    
    ### 3.2.1 íŒŒë“œ ìƒì„±í•˜ê¸°
    
    íŒŒë“œë¥¼ ìƒì„±í•˜ëŠ” ëª…ë ¹ì–´
    
    ```JavaScript
    kubectl run [íŒŒë“œì˜ ì´ë¦„] --image=[ì´ë¯¸ì§€ëª…]
    ```
    
    **kubectl run vs kubectl create**
    
    createë¡œ íŒŒë“œë¥¼ ìƒì„±í•˜ë ¤ë©´ deploymentë¥¼ ì¶”ê°€í•´ì„œ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.
    
    ```JavaScript
    kubectl create deployment [íŒŒë“œ ë„¤ì„] --image=nginx
    ```
    
    kubectl createë¥¼ í†µí•´ íŒŒë“œë¥¼ ìƒì„±í•˜ë©´ deployment ê·¸ë£¹ì— ì†í•œ íŒŒë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë°˜ë©´ì—, runì„ í†µí•´ ìƒì„±í•˜ë©´ íŒŒë“œëŠ” deploymentì— ì†í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    
    ### 3.2.2 ì˜¤ë¸Œì íŠ¸ë€?
    
    íŒŒë“œì™€ ë””í”Œë¡œì´ë¨¼íŠ¸ëŠ” ìŠ¤í™(spec)ê³¼ ìƒíƒœ(status) ë“±ì˜ ê°’ì„ ê°€ì§‘ë‹ˆë‹¤. ì´ëŸ¬í•œ ê°’ì„ ê°€ì§€ê³  ìˆëŠ” íŒŒë“œì™€ ë””í”Œë¡œì´ë¨¼íŠ¸ë¥¼ ê°œë³„ ì†ì„±ì„ í¬í•¨í•´ ë¶€ë¥´ëŠ” ë‹¨ìœ„ë¥¼ **ì˜¤ë¸Œì íŠ¸(Object)**ë¼ê³  í•©ë‹ˆë‹¤.
    
      
    
    **ì˜¤ë¸Œì íŠ¸ 4ê°€ì§€**
    
    - **íŒŒë“œ**
        
        ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì‹¤í–‰ë˜ëŠ” ìµœì†Œ ë‹¨ìœ„. ë…ë¦½ì ì¸ ê³µê°„ê³¼ ë…ë¦½ì ì¸ ì‚¬ìš© ê°€ëŠ¥í•œ IPë¥¼ ê°€ì§‘ë‹ˆë‹¤. ë‹¨ì¼ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ ì»¨í…Œì´ë„ˆì˜ ì§‘í•©ì´ì§€ë§Œ ë³´í†µ 1ê°œì˜ íŒŒë“œì— 1ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ ì ìš©í•©ë‹ˆë‹¤.
        
    - **ë„¤ì„ìŠ¤í˜ì´ìŠ¤**
        
        ë¦¬ì†ŒìŠ¤ë“¤ì„ êµ¬ë¶„í•´ ê´€ë¦¬í•˜ëŠ” ê·¸ë£¹ì…ë‹ˆë‹¤.
        
        **ê·¸ë£¹ 3ê°€ì§€**
        
        1. default: ê·¸ë£¹ì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ì ìœ¼ë¡œ í• ë‹¹ë˜ëŠ” ê·¸ë£¹
        2. kube-system: ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¦¬ì†ŒìŠ¤ë“¤
        3. metallb-system: ì™¸ë¶€ì—ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ë¡œ ì ‘ì†í•˜ê²Œ ë„ì™€ì£¼ëŠ” ì»¨í…Œì´ë„ˆë“¤ì´ ì†í•œ ê³³
    - **ë³¼ë¥¨**
        
        íŒŒë“œê°€ ìƒì„±ë  ë•Œ íŒŒë“œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë””ë ‰í„°ë¦¬. íŒŒë“œê°€ ì˜ì†ì ì¸ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ë³´ì¡´í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.
        
    - **ì„œë¹„ìŠ¤**
        
        íŒŒë“œëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ìœ ë™ì ì´ë¯€ë¡œ ì ‘ì† ì •ë³´ê°€ ê³ ì •ì ì´ì§€ ì•Šë‹¤. ë”°ë¼ì„œ íŒŒë“œ ì ‘ì†ì„ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€í•˜ê²Œ ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ë‚´/ì™¸ë¶€ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤. íŒŒë“œê°€ ìƒˆë¡œ ìƒì„±ë  ë•Œë§ˆë‹¤ ì„œë¹„ìŠ¤ì™€ íŒŒë“œë¥¼ ì—°ê²°í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ê¸°ì¡´ ì¸í”„ë¼ì—ì„œ ë¡œë“œë°¸ëŸ°ì„œ, ê²Œì´íŠ¸ì›¨ì´ì™€ ë¹„ìŠ·í•©ë‹ˆë‹¤.
        
        (ë‚´ê°€ ì´í•´í•œ ëœ»: kube-proxyì˜ ê²½ìš°, ì™¸ë¶€ì—ì„œ íŒŒë“œì— ì ‘ì† ê°€ëŠ¥í•˜ê²Œ êµ¬í˜„í•˜ëŠ” ì—­í• ì„ í•˜ê³  **ì„œë¹„ìŠ¤**ëŠ” ê³ ì • IPë‚˜ ë„ë©”ì¸ ì œê³µì„ í†µí•´ í•´ë‹¹ ì„œë¹„ìŠ¤ë¡œ ì ‘ê·¼í•˜ë©´ íŒŒë“œë¡œ ì—°ê²°í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ì„œë¹„ìŠ¤ê°€ í•„ìš”í•œ ì´ìœ ëŠ” íŒŒë“œë¥¼ ì¬ìƒì„±í• ë•Œë§ˆë‹¤ IPë¥¼ ì¬í• ë‹¹ ë°›ì„í…ë° ì„œë¹„ìŠ¤ë¥¼ í†µí•´ íŒŒë“œì™€ ì—°ê²°ë˜ì–´ ìˆë‹¤ë©´ ì„œë¹„ìŠ¤ë¥¼ í†µí•œ ì£¼ì†Œë¡œ ìš”ì²­í•˜ë©´ íŒŒë“œë¡œ ì•Œì•„ì„œ ì—°ê²°í•´ì£¼ê¸° ë•Œë¬¸ì´ë‹¤.)
        
    
    > [!important]  
    > ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë€? ë„¤ì„ì„ ê³ ìœ í•˜ê²Œ ê°€ì§€ëŠ” íŠ¹ì •í•œ ê³µê°„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, c++ì—ì„  using namespace std;ë¥¼ í†µí•´ std::cinì„ cinìœ¼ë¡œ ì¤„ì—¬ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” stdì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ stdë¥¼ ë¶™ì—¬ ì“¸ í•„ìš”ê°€ ì—†ì–´ì§€ëŠ” ê²ƒì…ë‹ˆë‹¤.  
    
    ![[Untitled 30.png]]
    
    ### ë””í”Œë¡œì´ë¨¼íŠ¸(Deployment)
    
    ê¸°ë³¸ ì˜¤ë¸Œì íŠ¸ì— ê¸°ëŠ¥ë“¤ì„ ì¶”ê°€í•´ êµ¬í˜„í•œ ê²ƒì´ ë””í”Œë¡œì´ë¨¼íŠ¸(Deployment)ì…ë‹ˆë‹¤. ì´ì™¸ì—ë„ ë°ëª¬ì…‹(DaemonSet), ì»¨í”¼ê·¸ë§µ(ConfigMap), ë ˆí”Œë¦¬ì¹´ì…‹(ReplicaSet), PV(PersistentVolume), PVC(PersistentVolumeClaim), ìŠ¤í…Œì´íŠ¸í’€ì…‹(StatefulSet) ë“±ì´ ìˆìŠµë‹ˆë‹¤.
    
    ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ê°€ì¥ ë§ì´ ì“°ì´ëŠ” ë””í”Œë¡œì´ë¨¼íŠ¸ ì˜¤ë¸Œì íŠ¸ëŠ” íŒŒë“œì— ê¸°ë°˜ì„ ë‘ë©°, ë ˆí”Œë¦¬ì¹´ì…‹ ì˜¤ë¸Œì íŠ¸ë¥¼ í•©ì¹œ í˜•íƒœì…ë‹ˆë‹¤.
    
    ![[Untitled 1 16.png]]
    
    ![[Untitled 2 14.png]]
    
    ìœ„ì—ì„œ íŒŒë“œì— ì‚¬ìš©ë˜ëŠ” nginx ì´ë¯¸ì§€ëŠ” ì»¨í…Œì´ë„ˆë¡œ ë„ì»¤ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ë„ì»¤ì˜ ê¸°ë³¸ ì €ì¥ì†Œì¸ ë„ì»¤ í—ˆë¸Œì—ì„œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
    
    ### 3.2.3 ë ˆí”Œë¦¬ì¹´ì…‹ìœ¼ë¡œ íŒŒë“œ ìˆ˜ ê´€ë¦¬í•˜ê¸°
    
    ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„  ì—¬ëŸ¬ ê°œì˜ íŒŒë“œë¥¼ ê°„í¸íˆ ë§Œë“¤ê¸° ìœ„í•œ ë ˆí”Œë¦¬ì¹´ì…‹ ì˜¤ë¸Œì íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ë ˆí”Œë¦¬ì¹´ì…‹ì€ íŒŒë“œ ìˆ˜ë§Œ ë³´ì¥í•˜ë¯€ë¡œ ë¡¤ë§ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ ë“±ì´ ì¶”ê°€ëœ ë””í”Œë¡œì´ë¨¼íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸°ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.
    
    ![[Untitled 3 12.png]]
    
    ```JavaScript
    # ì•„ë˜ ëª…ë ¹ì–´ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.
    # nginx-podì€ deployment í‚¤ì›Œë“œë¥¼ ì“°ì§€ ì•Šê³  ìƒì„±í–ˆê¸° ë•Œë¬¸ì— deploymentì— ì†í•œ podì´ ì•„ë‹™ë‹ˆë‹¤.
    # ë”°ë¼ì„œ, ë ˆí”Œë¦¬ì¹´ì…‹ì„ í†µí•´ ê°œìˆ˜ë¥¼ ëŠ˜ë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
    kubectl scale pod nginx-pod --replicas=3
    
    kubectl scale deployment [deployment ì´ë¦„] --replicas=3
    ```
    
    ### 3.2.4 ìŠ¤í™ì„ ì§€ì •í•´ ì˜¤ë¸Œì íŠ¸ ìƒì„±í•˜ê¸°(p103)
    
    createì—ì„  replicas ì˜µì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ê³ , scaleì€ ì´ë¯¸ ë§Œë“¤ì–´ì§„ ë””í”Œë¡œì´ë¨¼íŠ¸ì—ë§Œ ì ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
    
    ë”°ë¼ì„œ, ì´ëŸ¬í•œ ì„¤ì •ì„ ì ìš©í•˜ë ¤ë©´ íŒŒì¼ì„ ì‘ì„±í•©ë‹ˆë‹¤. ì„¤ì •ì„ ìœ„í•´ ì‚¬ìš©ë˜ëŠ” íŒŒì¼ì„ **ì˜¤ë¸Œì íŠ¸ ìŠ¤í™(object spec)**ì´ë¼ê³  í•©ë‹ˆë‹¤. ì˜¤ë¸Œì íŠ¸ ìŠ¤í™ì€ ì¼ë°˜ì ìœ¼ë¡œ YAML ë¬¸ë²•ìœ¼ë¡œ ì‘ì„±í•©ë‹ˆë‹¤.
    
    ![[Untitled 4 11.png]]
    
    apiVersionì€ ì˜¤ë¸Œì íŠ¸ë¥¼ í¬í•¨í•˜ëŠ” APIì˜ ë²„ì „ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
    
    ![[Untitled 5 8.png]]
    
    ì—¬ê¸°ì„œ API ë²„ì „ì€ kubectl api-versions ëª…ë ¹ì–´ë¥¼ í†µí•´ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
      
    
    sed(streamlined editor) ëª…ë ¹ì–´ë¡œ ë ˆí”Œë¦¬ì¹´ì…‹ì˜ ê°œìˆ˜ ì œí•œì„ ë°”ê¿”ë³´ê² ìŠµë‹ˆë‹¤.
    
    ```JavaScript
    sed -i 's/replicas: 3/replicas: 6' ./echo-hname.yaml
    ```
    
    ì´ì œ ë‹¤ì‹œ createë¡œ deploymentë¥¼ ë§Œë“¤ë©´ ë ê¹Œìš”? ê·¸ëŸ¬ë‚˜, createë¡œ ë‹¤ì‹œ deploymentë¥¼ ë§Œë“¤ë©´ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì„œë²„ë¼ë©° ì•ˆëœë‹¤ëŠ” ë©”ì‹œì§€ê°€ ë‚˜ì˜µë‹ˆë‹¤.
    
      
    
    ë”°ë¼ì„œ, applyë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
    
    ```JavaScript
    [root@m-k8s 3.2.4]# kubectl apply -f ./echo-hname.yaml 
    Warning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply
    deployment.apps/echo-hname configured
    ```
    
    applyë¥¼ ì‚¬ìš©í•˜ë©´ ìœ„ì²˜ëŸ¼ applyë¥¼ í†µí•´ ë§Œë“¤ì–´ì§„ ìì›ì´ ì•„ë‹ˆë¼ê³  ê²½ê³ ë¥¼ ì¤ë‹ˆë‹¤. ì´ì²˜ëŸ¼ ìœ ë™ì ìœ¼ë¡œ ì„¤ì •ì´ ë³€ê²½ ë  ìˆ˜ ìˆëŠ” ë””í”Œë¡œì´ë¨¼íŠ¸ëŠ” applyë¡œ ìƒì„±í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
    
    ### 3.2.6 íŒŒë“œì˜ ì»¨í…Œì´ë„ˆ ìë™ ë³µêµ¬ ë°©ë²•
    
    íŒŒë“œì˜ ìë™ ë³µêµ¬ ê¸°ìˆ ì„ ì…€í”„ íë§ì´ë¼ê³  í•©ë‹ˆë‹¤.
    
    killì„ í†µí•´ í”„ë¡œì„¸ìŠ¤ë¥¼ ì£½ì—¬ë„ ìë™ìœ¼ë¡œ ë³µêµ¬ë©ë‹ˆë‹¤.
    
    ```JavaScript
    kubectl get pods -o wide
    kubectl exec -it nginx-pod /bin/bash
    
    ls -l /run/nginx.pid
    cat /run/nginx.pid
    cat /run/nginx.pid | kill
    # ì´í›„ì— ìë™ìœ¼ë¡œ ë³µêµ¬ëœë‹¤.
    ```
    
    ### 3.2.7 íŒŒë“œì˜ ë™ì‘ ë³´ì¦ ê¸°ëŠ¥
    
    íŒŒë“œ ìì²´ì— ë¬¸ì œê°€ ë°œìƒí•˜ë©´ íŒŒë“œë¥¼ ìë™ ë³µêµ¬í•´ì„œ íŒŒë“œê°€ í•­ìƒ ë™ì‘í•˜ë„ë¡ ë³´ì¦í•˜ëŠ” ê¸°ëŠ¥ë„ ìˆìŠµë‹ˆë‹¤.
    
    ì¼ë°˜ podì˜ ê²½ìš°(kubectl runì„ í†µí•´ ìƒì„±í•œ podì€ deploymentì— ì†í•˜ì§€ ì•Šì€ ë‹¨ì¼ íŒŒë“œë‹¤) ì‚­ì œí•´ë„ ë‹¤ì‹œ ìƒì„±ë˜ì§€ ì•Šì§€ë§Œ Deploymentì— replica ê°œìˆ˜ë¥¼ ëª…ì‹œí•œ íŒŒë“œë¥¼ ì‚­ì œí•˜ë©´ ìë™ìœ¼ë¡œ ê°œìˆ˜ì— ë§ê²Œ íŒŒë“œë¥¼ ì¶”ê°€ ìƒì„±í•œë‹¤.
    
    ```Bash
    kubectl run nginx-pod --image=nginx
    kubectl delete pods nginx-pod
    # ìœ„ì²˜ëŸ¼ runì„ í†µí•´ ë§Œë“¤ì–´ì§„ íŒŒë“œëŠ” Deploymentì— ì†í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì‚­ì œë¥¼ í•´ë„ ë³µêµ¬ë˜ì§€ ì•ŠëŠ”ë‹¤.
    kubectl create deployment -f echo-hname.yaml
    # ì•„ë˜ ëª…ë ¹ì–´ë¡œ podì„ ì‚­ì œí•´ë„ podëŠ” replicaì— ë§ì¶°ì„œ ì¬ìƒì„±ëœë‹¤.
    kubectl delete pods echo-hname-5325135135135
    # ë”°ë¼ì„œ, deployment ìì²´ë¥¼ ì‚­ì œí•´ì•¼ í•œë‹¤.
    kubectl delete deployment echo-hname
    ```
    
    ![[Untitled 6 7.png]]
    
    ### 3.2.8 ë…¸ë“œ ìì› ë³´í˜¸í•˜ê¸°
    
    - **íŒŒë“œì˜ ì„¸ë¶€ ê°’ í™•ì¸í•˜ê¸°**
        
        íŒŒë“œì˜ ì„¸ë¶€ ê°’ í™•ì¸í•˜ëŠ” ë²•
        
        ```Bash
        kubectl get pods echo-hname-1234214-531 -o yaml > pod.yaml
        ```
        
    - **íŠ¹ì • ë…¸ë“œì—ê²Œ íŒŒë“œ ìŠ¤ì¼€ì¥´ë§ ë°©ì§€í•˜ê¸°**
        
        ë¬¸ì œê°€ ìƒê¸´ ë…¸ë“œì— íŒŒë“œë¥¼ í• ë‹¹í•˜ë©´ ë¬¸ì œê°€ ì»¤ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¼ì—ë„ ì–´ì©” ìˆ˜ ì—†ì´ í•´ë‹¹ ë…¸ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ë°–ì— ì—†ë‹¤ëŠ” ìƒí™©ì´ë©´ ì–´ë–»ê²Œ í• ê¹Œìš”? ì˜í–¥ë„ê°€ ì ì€ íŒŒë“œ(ë¹„êµì  ì¤‘ë‹¨ë˜ê±°ë‚˜ ë¬¸ì œê°€ ë°œìƒí•´ë„ ìœ„í—˜í•˜ì§€ ì•Šì€ íŒŒë“œ)ë¥¼ í• ë‹¹í•´ ì¼ì • ê¸°ê°„ ì‚¬ìš©í•˜ë©´ì„œ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.
        
        ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ë„ ìˆëŠ” ë…¸ë“œë¼ëŠ” ê²ƒì„ ì¿ ë²„ë„¤í‹°ìŠ¤ì— ì•Œë ¤ì£¼ë ¤ë©´ **cordon**ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.
        
        ì´ì œ cordonì„ í†µí•´ íŠ¹ì • ë…¸ë“œì— ìƒíƒœë¥¼ ë³´ì¡´í•©ë‹ˆë‹¤.
        
        ```Bash
        kubectl cordon [ë…¸ë“œëª…]
        kubectl cordon w1-k8s # cordonì„ ë²ˆì—­í•˜ë‹ˆ ë¦¬ë³¸ì´ë¼ ë‚˜ì˜¤ëŠ”ë°
        # ì•„ë¬´ë˜ë„ ë¦¬ë³¸? ìˆ˜ì‚¬ëŒ€ ë¦¬ë³¸ì²˜ëŸ¼ ìœ„í—˜í•˜ë‹¤ê³  ë§ˆí‚¹í•œë‹¤ëŠ” ëœ»ì—ì„œ ì˜¨ë“¯?
        
        # ë…¸ë“œì˜ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ë©´ ë§ˆí‚¹ì´ ë˜ì–´ìˆë‹¤.
        kubectl get nodes
        NAME     STATUS                     ROLES    AGE    VERSION
        m-k8s    Ready                      master   5d5h   v1.18.4
        w1-k8s   Ready,SchedulingDisabled   <none>   5d5h   v1.18.4
        w2-k8s   Ready                      <none>   5d5h   v1.18.4
        w3-k8s   Ready                      <none>   5d5h   v1.18.4
        
        # ì—¬ê¸°ì„œ ë‹¤ì‹œ replicas ê°œìˆ˜ë¥¼ ëŠ˜ë ¤ì„œ íŒŒë“œì˜ ê°œìˆ˜ë¥¼ ëŠ˜ë ¤ë³´ì
        kubectl scale deployment echo-hname --replicas=10
        [root@m-k8s 3.2.4]# kubectl get pods -o wide
        NAME                        READY   STATUS              RESTARTS   AGE   IP               NODE     NOMINATED NODE   READINESS GATES
        echo-hname-7894b67f-8t2sw   1/1     Running             0          8s    172.16.132.12    w3-k8s   <none>           <none>
        echo-hname-7894b67f-9xxcc   0/1     ContainerCreating   0          8s    <none>           w2-k8s   <none>           <none>
        echo-hname-7894b67f-d2cgp   0/1     ContainerCreating   0          8s    <none>           w2-k8s   <none>           <none>
        echo-hname-7894b67f-f669h   0/1     ContainerCreating   0          8s    <none>           w3-k8s   <none>           <none>
        echo-hname-7894b67f-hswpw   0/1     ContainerCreating   0          8s    <none>           w2-k8s   <none>           <none>
        echo-hname-7894b67f-rcjk5   1/1     Running             0          24m   172.16.132.8     w3-k8s   <none>           <none>
        echo-hname-7894b67f-s8cgj   0/1     ContainerCreating   0          8s    <none>           w3-k8s   <none>           <none>
        echo-hname-7894b67f-sfdr4   1/1     Running             0          24m   172.16.221.141   w1-k8s   <none>           <none>
        echo-hname-7894b67f-vs2hw   0/1     ContainerCreating   0          8s    <none>           w3-k8s   <none>           <none>
        echo-hname-7894b67f-zcx98   1/1     Running             0          8s    172.16.103.139   w2-k8s   <none>           <none>
        
        # ìœ„ì²˜ëŸ¼ w1-k8sì—ëŠ” podê°€ í• ë‹¹ë˜ì§€ ì•ŠëŠ”ë‹¤.
        ```
        
    
    ### 3.2.9 ë…¸ë“œ ìœ ì§€ ë³´ìˆ˜í•˜ê¸°
    
    ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ë…¸ë“œ ì¦ì„¤ì´ë‚˜ ìœ ì§€ë³´ìˆ˜ë¥¼ ìœ„í•´ì„œ ë…¸ë“œë¥¼ êº¼ì•¼í•˜ëŠ” ìƒí™©ì´ ìˆìŠµë‹ˆë‹¤.
    
    drain ëª…ë ¹ì–´ë¥¼ í†µí•´ ì§€ì •ëœ ë…¸ë“œì˜ íŒŒë“œë¥¼ ì „ë¶€ ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ì´ë™ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ íŒŒë“œë¥¼ ì˜®ê¸°ëŠ” ê²Œ ì•„ë‹ˆë¼ í•´ë‹¹ ë…¸ë“œì—ì„œ íŒŒë“œë¥¼ ì‚­ì œí•˜ê³  ìƒˆë¡œ íŒŒë“œë¥¼ ë§Œë“­ë‹ˆë‹¤.
    
    ```Bash
    kubectl drain w3-k8s --ignore-daemonsets # í•´ë‹¹ ë…¸ë“œì— ë°ëª¬ì…‹ì´ ìˆìœ¼ë©´
    ```
    
    ### 3.2.10 íŒŒë“œ ì—…ë°ì´íŠ¸í•˜ê³  ë³µêµ¬í•˜ê¸°(p118)
    
    - **íŒŒë“œ ì—…ë°ì´íŠ¸ í•˜ê¸°**
        
        ```Bash
        kubectl apply -f ./pod-spec.yaml --record
        # --recordëŠ” ë°°í¬í•œ ì •ë³´ì˜ íˆìŠ¤í† ë¦¬ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.
        ```
        
        ![[Untitled 7 7.png]]
        
        ```Bash
        # record ì˜µì…˜ìœ¼ë¡œ ê¸°ë¡ëœ íˆìŠ¤í† ë¦¬ëŠ” rollout history ëª…ë ¹ì„ ì‹¤í–‰í•´ í™•ì¸ ê°€ëŠ¥
        [root@m-k8s 3.2.10]# kubectl rollout history deployment rollout-nginx
        deployment.apps/rollout-nginx 
        REVISION  CHANGE-CAUSE
        1         kubectl apply --filename=./rollout-nginx.yaml --record=true
        
        # curlë¡œ ë°°í¬ ë²„ì „ í™•ì¸í•˜ê¸°
        curl -I [Podì˜ IP] | grep Server
        # set image ëª…ë ¹ìœ¼ë¡œ íŒŒë“œì˜ ì»¨í…Œì´ë„ˆ ë²„ì „ ì—…ë°ì´íŠ¸í•˜ê¸°
        
        
        kubectl set image deployment rollout-nginx nginx=nginx:1.16.0 --record
        # ê²°ê³¼
        deployment.apps/rollout-nginx image updated
        
        # deploymentì˜ íˆìŠ¤í† ë¦¬ë¥¼ ì¶œë ¥í•œë‹¤.
        kubectl rollout history deployment rollout-nginx
        # ê²°ê³¼
        deployment.apps/rollout-nginx 
        REVISION  CHANGE-CAUSE
        1         kubectl apply --filename=./rollout-nginx.yaml --record=true
        2         kubectl set image deployment rollout-nginx nginx=nginx:1.16.0 --record=true
        
        # ì—…ë°ì´íŠ¸ ìƒíƒœ í™•ì¸í•˜ê¸°
        kubectl rollout status deployment rollout-nginx
        ```
        
        ë²„ì „ì„ ì—…ë°ì´íŠ¸í•˜ë©´ ì•„ë˜ì²˜ëŸ¼ íŒŒë“œë¥¼ ì¼ë¶€ë¥¼ ì‚­ì œí•˜ê³  ì¼ë¶€ ìƒì„±ì„ ë¬´í•œ ë°˜ë³µí•œë‹¤. ë‹¨ ë²ˆì— ëª¨ë“  íŒŒë“œë¥¼ ì‚­ì œí•˜ë©´ ì˜í–¥ì„ ì„œë¹„ìŠ¤ì— ì˜í–¥ì„ ë¼ì¹˜ê¸° ë•Œë¬¸ì´ë‹¤. ê¸°ë³¸ í¼ì„¼í‹°ì§€ëŠ” 1/4(25%)ì´ë©° ìµœì†Ÿê°’ì€ 1ê°œì´ë‹¤.
        
        ![[Untitled 8 6.png]]
        
    - **ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ ì‹œ íŒŒë“œ ë³µêµ¬í•˜ê¸°(p121)**
        
        ```Bash
        # ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ë¥¼ ê°€ì •í•˜ê¸° ìœ„í•´
        # ì¡´ì¬í•˜ì§€ ì•ŠëŠ” 1.17.23 ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•œë‹¤.
        kubectl set image deployment nginx=nginx:1.17.23 --record
        kubectl get pods
        
        NAME                              READY   STATUS             RESTARTS   AGE
        deployment-name-d965658d8-42dvq   1/1     Running            0          18m
        deployment-name-d965658d8-8gks2   1/1     Running            0          21m
        deployment-name-d965658d8-d8dhn   1/1     Running            0          19m
        deployment-name-d965658d8-ffbzt   1/1     Running            0          19m
        deployment-name-d965658d8-kzhf6   1/1     Running            0          18m
        rollout-nginx-8566d57f75-8bjtd    1/1     Running            0          6m47s
        rollout-nginx-8566d57f75-ggt87    1/1     Running            0          7m22s
        rollout-nginx-8566d57f75-xqg74    1/1     Running            0          7m12s
        rollout-nginx-856f4c79c9-h8qvx    0/1     ImagePullBackOff   0          10s
        
        
        # ìœ„ì²˜ëŸ¼ ì˜ëª»ëœ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë„£ìœ¼ë©´ ëŒ€ê¸° ì¤‘ì—ì„œ ìƒíƒœê°€ ë„˜ì–´ê°€ì§€ ì•ŠìŠµë‹ˆë‹¤.
        # rollout statusë¥¼ í†µí•´ ìƒíƒœë¥¼ ìì„¸í•˜ê²Œ í™•ì¸í•©ì‹œë‹¤
        [root@m-k8s 3.2.10]# kubectl rollout status deployment rollout-nginx
        Waiting for deployment "rollout-nginx" rollout to finish: 1 out of 3 new replicas have been updated...
        
        # describeë¥¼ í†µí•´ ë” ìì„¸íˆ ì•Œì•„ë´…ì‹œë‹¤
        kubectl describe deployment rollout-nginx | tail -20
        # ê²°ê³¼
            Mounts:       <none>
          Volumes:        <none>
        Conditions:
          Type           Status  Reason
          ----           ------  ------
          Available      False   MinimumReplicasUnavailable
          Progressing    True    ReplicaSetUpdated
        OldReplicaSets:  rollout-nginx-8566d57f75 (3/3 replicas created)
        # ì•„ë˜ ì¤„ì„ ë³´ë©´ ìƒˆë¡œìš´ ë ˆí”Œë¦¬ì¹´ì…‹ì„ 1ê°œ ë§Œë“¤ê³  ë‚˜ë¨¸ì§€ëŠ” ì§„í–‰ë˜ì§€ ì•ŠëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
        NewReplicaSet:   rollout-nginx-856f4c79c9 (1/1 replicas created)
        Events:
          Type    Reason             Age   From                   Message
          ----    ------             ----  ----                   -------
          Normal  ScalingReplicaSet  11h   deployment-controller  Scaled up replica set rollout-nginx-64dd56c7b5 to 3
          Normal  ScalingReplicaSet  11h   deployment-controller  Scaled up replica set rollout-nginx-8566d57f75 to 1
          Normal  ScalingReplicaSet  11h   deployment-controller  Scaled down replica set rollout-nginx-64dd56c7b5 to 2
          Normal  ScalingReplicaSet  11h   deployment-controller  Scaled up replica set rollout-nginx-8566d57f75 to 2
          Normal  ScalingReplicaSet  11h   deployment-controller  Scaled down replica set rollout-nginx-64dd56c7b5 to 1
          Normal  ScalingReplicaSet  11h   deployment-controller  Scaled up replica set rollout-nginx-8566d57f75 to 3
          Normal  ScalingReplicaSet  11h   deployment-controller  Scaled down replica set rollout-nginx-64dd56c7b5 to 0
          Normal  ScalingReplicaSet  11h   deployment-controller  Scaled up replica set rollout-nginx-856f4c79c9 to 1
        
        # ë²„ì „ ì—…ë°ì´íŠ¸ ê¸°ë¡ì„ ì¡°íšŒí•œë‹¤.
        kubectl rollout history deployment rollout-nginx
        # ê²°ê³¼
        REVISION  CHANGE-CAUSE
        1         kubectl apply --filename=./rollout-nginx.yaml --record=true
        2         kubectl set image deployment rollout-nginx nginx=nginx:1.16.0 --record=true
        3         kubectl set image deployment rollout-nginx nginx=nginx:1.17.23 --record=true
        
        # !!!!ë²„ì „ ì—…ë°ì´íŠ¸ë¥¼ ì·¨ì†Œí•œë‹¤!!!
        kubectl rollout undo deployment rollount-nginx
        
        # ë‹¤ì‹œ íˆìŠ¤í† ë¦¬ë¥¼ ì¡°íšŒí•œë‹¤
        kubectl rollout history deployment rollout-nginx
        # ê²°ê³¼
        REVISION  CHANGE-CAUSE
        1         kubectl apply --filename=./rollout-nginx.yaml --record=true
        # ë²„ì „ 2ë¥¼ ì‚¬ìš©í•˜ì—¬ ë²„ì „4ë¥¼ ë§Œë“¤ê³  ë²„ì „ 2ëŠ” ì‚­ì œëœë‹¤.
        3         kubectl set image deployment rollout-nginx nginx=nginx:1.17.23 --record=true
        4         kubectl set image deployment rollout-nginx nginx=nginx:1.16.0 --record=true
        
        # ë‹¤ì‹œ ìƒíƒœë¥¼ ì¡°íšŒí•´ë³´ì
        kubectl rollout status deployment rollout-nginx
        # ê²°ê³¼
        deployment "rollout-nginx" successfully rolled out
        
        # describeë¥¼ í†µí•´ ìì„¸íˆ ì‚´í´ë³´ì
        kubectl describe deployment rollout-nginx | grep NewReplicaSet
          Progressing    True    NewReplicaSetAvailable
        NewReplicaSet:   rollout-nginx-8566d57f75 (3/3 replicas created)
        ```
        
    - **íŠ¹ì • ì‹œì ìœ¼ë¡œ íŒŒë“œ ë³µêµ¬í•˜ê¸°(p124)**
        
        ```Bash
        # ë²„ì „ 1ë¡œ ë³µêµ¬í•˜ê¸°
        kubectl rollout undo deployment rollout-nginx --to-revision=1
        # ê²°ê³¼
        deployment.apps/rollout-nginx rolled back
        
        # ë¡¤ì•„ì›ƒ ê²°ê³¼ í™•ì¸
        kubectl rollout status deployment rollout-nginx
        
        # ë³µêµ¬ ê²°ê³¼ ì¡°íšŒí•˜ê¸°
        kubectl rollout history deployment rollout-nginx
        # ê²°ê³¼
        deployment.apps/rollout-nginx 
        REVISION  CHANGE-CAUSE
        3         kubectl set image deployment rollout-nginx nginx=nginx:1.17.23 --record=true
        4         kubectl set image deployment rollout-nginx nginx=nginx:1.16.0 --record=true
        5         kubectl apply --filename=./rollout-nginx.yaml --record=true
        
        # nginx ë²„ì „ ì¡°íšŒí•˜ê¸°
        curl -I --silent [IP] | grep Server
        ```
        

### í•µì‹¬ ìš”ì•½

- í•µì‹¬ ìš”ì•½ ì ‘ê¸°
    
      
    
- AI ìš”ì•½
    
    ì¿ ë²„ë„¤í‹°ìŠ¤ ë„ì»¤ 3.2ì—ì„œëŠ” kubectl ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ ë ˆí”Œë¦¬ì¹´ì…‹ì˜ ê°œìˆ˜ë¥¼ ë³€ê²½í•˜ê³ , íŒŒë“œì˜ ìë™ ë³µêµ¬ì™€ ë™ì‘ ë³´ì¦ ê¸°ëŠ¥ì„ ì„¤ëª…í•©ë‹ˆë‹¤. íŠ¹ì • ë…¸ë“œì— íŒŒë“œë¥¼ í• ë‹¹í•˜ì§€ ì•Šë„ë¡ cordon ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ê³ , ë…¸ë“œ ìœ ì§€ ë³´ìˆ˜ë¥¼ ìœ„í•´ drain ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. íŒŒë“œ ì—…ë°ì´íŠ¸ì™€ ë³µêµ¬ ë°©ë²•ë„ ë‹¤ë£¨ë©°, ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ ì‹œ ë¡¤ë°±í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.
    
    íŒŒë“œ ì—…ë°ì´íŠ¸ëŠ” `kubectl apply`ì™€ `kubectl set image` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë£¨ì–´ì§€ë©°, ì—…ë°ì´íŠ¸ íˆìŠ¤í† ë¦¬ëŠ” `kubectl rollout history` ëª…ë ¹ì–´ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—…ë°ì´íŠ¸ ìƒíƒœëŠ” `kubectl rollout status` ëª…ë ¹ì–´ë¡œ ëª¨ë‹ˆí„°ë§ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ ì‹œ `kubectl rollout undo` ëª…ë ¹ì–´ë¡œ ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹ì • ì‹œì ìœ¼ë¡œ ë³µêµ¬í•  ë•ŒëŠ” `kubectl rollout undo --to-revision` ì˜µì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
    

### ë³µìŠµì•Œë¦¼

- 
- ìë™ìœ¼ë¡œ í•¸ë“œí°ì— ì•Œë¦¼ì´ ì˜¤ë„ë¡ ì„¤ì •í•˜ê³  ì‹¶ìœ¼ë©´ ë‹¤ìŒê³¼ ê°™ì´ í•œë‹¤.

> [!important]  
> 